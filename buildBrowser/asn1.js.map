{"version":3,"sources":["../src/asn1.js"],"names":["powers2","Uint8Array","digitsString","LocalBaseBlock","parameters","blockLength","error","warnings","valueBeforeDecode","slice","ArrayBuffer","blockName","constructor","byteLength","LocalHexBlock","BaseClass","isHexOnly","valueHex","inputBuffer","inputOffset","inputLength","intBuffer","length","push","sizeOnly","object","ex","LocalIdentificationBlock","idBlock","tagClass","tagNumber","isConstructed","firstOctet","retBuf","retView","number","encodedBuf","encodedView","size","i","curView","tagClassMask","tagNumberMask","count","tagNumberBufferMaxLength","intTagNumberBuffer","tempBuffer","tempBufferView","set","LocalLengthBlock","isIndefiniteForm","lenBlock","longFormUsed","lengthBufferView","LocalValueBlock","TypeError","BaseBlock","valueBlockType","name","optional","primitiveSchema","valueBlock","resultOffset","fromBER","idBlockBuf","toBER","valueBlockSizeBuf","lenBlockBuf","valueBlockBuf","indefBuf","indefView","toJSON","LocalPrimitiveValueBlock","valueHexView","Primitive","LocalConstructedValueBlock","value","initialOffset","initialLength","checkLen","indefiniteLength","currentOffset","returnObject","LocalFromBER","offset","result","concat","EndOfContent","pop","valueBuf","Constructed","LocalEndOfContentValueBlock","paramaters","LocalBooleanValueBlock","view","utilDecodeTC","call","Boolean","Sequence","Set","Null","LocalOctetStringValueBlock","prototype","currentBlockName","OctetString","octetString","JSON","stringify","LocalBitStringValueBlock","unusedBits","BitString","bitString","LocalIntegerValueBlock","valueDec","expectedLength","_valueHex","updatedValueHex","updatedView","viewAdd","first","second","c","firstView","secondView","firstViewCopy","firstViewCopyLength","secondViewCopy","secondViewCopyLength","max","counter","power2","n","p","digits","newValue","viewSub","b","firstBit","bitNumber","currentByte","asn1View","flag","byteNumber","charAt","_value","_valueDec","Integer","otherValue","integer","toDER","fromDER","Enumerated","LocalSidValueBlock","isFirstSid","tempValueHex","tempView","sidValue","toString","LocalObjectIdentifierValueBlock","fromString","sidBlock","string","pos1","pos2","sid","indexOf","substr","plus","parsedSID","parseInt","isNaN","sidStr","sidArray","ObjectIdentifier","LocalUtf8StringValueBlock","Utf8String","fromBuffer","String","fromCharCode","apply","decodeURIComponent","escape","inputString","str","unescape","encodeURIComponent","strLen","charCodeAt","LocalBmpStringValueBlock","BmpString","copyBuffer","valueView","temp","Uint16Array","strLength","codeBuf","codeView","dif","j","LocalUniversalStringValueBlock","UniversalString","Uint32Array","LocalSimpleStringValueBlock","LocalSimpleStringBlock","NumericString","PrintableString","TeletexString","VideotexString","IA5String","GraphicString","VisibleString","GeneralString","CharacterString","UTCTime","year","month","day","hour","minute","fromDate","valueDate","toBuffer","buffer","inputDate","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","Date","UTC","parser","parserArray","exec","outputArray","Array","join","GeneralizedTime","millisecond","getUTCMilliseconds","isUTC","timeString","dateTimeString","fractionPart","hourDifference","minuteDifference","Number","valueOf","Error","multiplier","differencePosition","differenceString","fractionPointPosition","fractionPartCheck","fractionResult","Math","floor","tempDate","getUTCDay","DATE","TimeOfDay","DateTime","Duration","TIME","Choice","Any","Repeated","local","RawData","data","incomingOffset","localChangeType","inputObject","newType","newObject","Object","newASN1Type","compareSchema","root","inputData","inputSchema","choiceResult","verified","_result","hasOwnProperty","encodedId","decodedOffset","schemaView","replace","admission","maxLength","_optional","arrayRoot","asn1","verifySchema","fromJSON","json"],"mappings":"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","sourcesContent":["/* eslint-disable indent */\n/*\n * Copyright (c) 2016-2018, Peculiar Ventures\n * All rights reserved.\n *\n * Author 2016-2018, Yury Strozhevsky <www.strozhevsky.com>.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its contributors\n *    may be used to endorse or promote products derived from this software without\n *    specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY\n * OF SUCH DAMAGE.\n *\n */\n//**************************************************************************************\nimport { getParametersValue, padNumber, isEqualBuffer, bufferToHexCodes, checkBufferParams, utilToBase, utilFromBase, utilEncodeTC, utilDecodeTC, utilConcatBuf, utilConcatView } from \"pvutils\";\n//**************************************************************************************\n//region Declaration of global variables\n//**************************************************************************************\nconst powers2 = [new Uint8Array([1])];\nconst digitsString = \"0123456789\";\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration for \"LocalBaseBlock\" class\n//**************************************************************************************\n/**\n * Class used as a base block for all remaining ASN.1 classes\n * @typedef LocalBaseBlock\n * @interface\n * @property {number} blockLength\n * @property {string} error\n * @property {Array.<string>} warnings\n * @property {ArrayBuffer} valueBeforeDecode\n */\nclass LocalBaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalBaseBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueBeforeDecode]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\t/**\n\t\t * @type {number} blockLength\n\t\t */\n\t\tthis.blockLength = getParametersValue(parameters, \"blockLength\", 0);\n\t\t/**\n\t\t * @type {string} error\n\t\t */\n\t\tthis.error = getParametersValue(parameters, \"error\", \"\");\n\t\t/**\n\t\t * @type {Array.<string>} warnings\n\t\t */\n\t\tthis.warnings = getParametersValue(parameters, \"warnings\", []);\n\t\t//noinspection JSCheckFunctionSignatures\n\t\t/**\n\t\t * @type {ArrayBuffer} valueBeforeDecode\n\t\t */\n\t\tif(\"valueBeforeDecode\" in parameters)\n\t\t\tthis.valueBeforeDecode = parameters.valueBeforeDecode.slice(0);\n\t\telse\n\t\t\tthis.valueBeforeDecode = new ArrayBuffer(0);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"baseBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName: string, blockLength: number, error: string, warnings: Array.<string>, valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\treturn {\n\t\t\tblockName: this.constructor.blockName(),\n\t\t\tblockLength: this.blockLength,\n\t\t\terror: this.error,\n\t\t\twarnings: this.warnings,\n\t\t\tvalueBeforeDecode: bufferToHexCodes(this.valueBeforeDecode, 0, this.valueBeforeDecode.byteLength)\n\t\t};\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Description for \"LocalHexBlock\" class\n//**************************************************************************************\n/**\n * Class used as a base block for all remaining ASN.1 classes\n * @extends LocalBaseBlock\n * @typedef LocalHexBlock\n * @property {number} blockLength\n * @property {string} error\n * @property {Array.<string>} warnings\n * @property {ArrayBuffer} valueBeforeDecode\n * @property {boolean} isHexOnly\n * @property {ArrayBuffer} valueHex\n */\n//noinspection JSUnusedLocalSymbols\nconst LocalHexBlock = BaseClass => class LocalHexBlockMixin extends BaseClass\n{\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Constructor for \"LocalHexBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\t/**\n\t\t * @type {boolean}\n\t\t */\n\t\tthis.isHexOnly = getParametersValue(parameters, \"isHexOnly\", false);\n\t\t/**\n\t\t * @type {ArrayBuffer}\n\t\t */\n\t\tif(\"valueHex\" in parameters)\n\t\t\tthis.valueHex = parameters.valueHex.slice(0);\n\t\telse\n\t\t\tthis.valueHex = new ArrayBuffer(0);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"hexBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\t//region Getting Uint8Array from ArrayBuffer\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\t\t//endregion\n\n\t\t//region Initial checks\n\t\tif(intBuffer.length === 0)\n\t\t{\n\t\t\tthis.warnings.push(\"Zero buffer length\");\n\t\t\treturn inputOffset;\n\t\t}\n\t\t//endregion\n\n\t\t//region Copy input buffer to internal buffer\n\t\tthis.valueHex = inputBuffer.slice(inputOffset, inputOffset + inputLength);\n\t\t//endregion\n\n\t\tthis.blockLength = inputLength;\n\n\t\treturn (inputOffset + inputLength);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\tif(this.isHexOnly !== true)\n\t\t{\n\t\t\tthis.error = \"Flag \\\"isHexOnly\\\" is not set, abort\";\n\t\t\treturn new ArrayBuffer(0);\n\t\t}\n\n\t\tif(sizeOnly === true)\n\t\t\treturn new ArrayBuffer(this.valueHex.byteLength);\n\n\t\t//noinspection JSCheckFunctionSignatures\n\t\treturn this.valueHex.slice(0);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.blockName = this.constructor.blockName();\n\t\tobject.isHexOnly = this.isHexOnly;\n\t\tobject.valueHex = bufferToHexCodes(this.valueHex, 0, this.valueHex.byteLength);\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n};\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of identification block class\n//**************************************************************************************\nclass LocalIdentificationBlock extends LocalHexBlock(LocalBaseBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalBaseBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {Object} [idBlock]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper();\n\n\t\tif(\"idBlock\" in parameters)\n\t\t{\n\t\t\t//region Properties from hexBlock class\n\t\t\tthis.isHexOnly = getParametersValue(parameters.idBlock, \"isHexOnly\", false);\n\t\t\tthis.valueHex = getParametersValue(parameters.idBlock, \"valueHex\", new ArrayBuffer(0));\n\t\t\t//endregion\n\n\t\t\tthis.tagClass = getParametersValue(parameters.idBlock, \"tagClass\", (-1));\n\t\t\tthis.tagNumber = getParametersValue(parameters.idBlock, \"tagNumber\", (-1));\n\t\t\tthis.isConstructed = getParametersValue(parameters.idBlock, \"isConstructed\", false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.tagClass = (-1);\n\t\t\tthis.tagNumber = (-1);\n\t\t\tthis.isConstructed = false;\n\t\t}\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"identificationBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\t//region Initial variables\n\t\tlet firstOctet = 0;\n\t\tlet retBuf;\n\t\tlet retView;\n\t\t//endregion\n\n\t\tswitch(this.tagClass)\n\t\t{\n\t\t\tcase 1:\n\t\t\t\tfirstOctet |= 0x00; // UNIVERSAL\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tfirstOctet |= 0x40; // APPLICATION\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tfirstOctet |= 0x80; // CONTEXT-SPECIFIC\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tfirstOctet |= 0xC0; // PRIVATE\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.error = \"Unknown tag class\";\n\t\t\t\treturn (new ArrayBuffer(0));\n\t\t}\n\n\t\tif(this.isConstructed)\n\t\t\tfirstOctet |= 0x20;\n\n\t\tif((this.tagNumber < 31) && (!this.isHexOnly))\n\t\t{\n\t\t\tretBuf = new ArrayBuffer(1);\n\t\t\tretView = new Uint8Array(retBuf);\n\n\t\t\tif(!sizeOnly)\n\t\t\t{\n\t\t\t\tlet number = this.tagNumber;\n\t\t\t\tnumber &= 0x1F;\n\t\t\t\tfirstOctet |= number;\n\n\t\t\t\tretView[0] = firstOctet;\n\t\t\t}\n\n\t\t\treturn retBuf;\n\t\t}\n\n\t\tif(this.isHexOnly === false)\n\t\t{\n\t\t\tconst encodedBuf = utilToBase(this.tagNumber, 7);\n\t\t\tconst encodedView = new Uint8Array(encodedBuf);\n\t\t\tconst size = encodedBuf.byteLength;\n\n\t\t\tretBuf = new ArrayBuffer(size + 1);\n\t\t\tretView = new Uint8Array(retBuf);\n\t\t\tretView[0] = (firstOctet | 0x1F);\n\n\t\t\tif(!sizeOnly)\n\t\t\t{\n\t\t\t\tfor(let i = 0; i < (size - 1); i++)\n\t\t\t\t\tretView[i + 1] = encodedView[i] | 0x80;\n\n\t\t\t\tretView[size] = encodedView[size - 1];\n\t\t\t}\n\n\t\t\treturn retBuf;\n\t\t}\n\n\t\tretBuf = new ArrayBuffer(this.valueHex.byteLength + 1);\n\t\tretView = new Uint8Array(retBuf);\n\n\t\tretView[0] = (firstOctet | 0x1F);\n\n\t\tif(sizeOnly === false)\n\t\t{\n\t\t\tconst curView = new Uint8Array(this.valueHex);\n\n\t\t\tfor(let i = 0; i < (curView.length - 1); i++)\n\t\t\t\tretView[i + 1] = curView[i] | 0x80;\n\n\t\t\tretView[this.valueHex.byteLength] = curView[curView.length - 1];\n\t\t}\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\t//region Getting Uint8Array from ArrayBuffer\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\t\t//endregion\n\n\t\t//region Initial checks\n\t\tif(intBuffer.length === 0)\n\t\t{\n\t\t\tthis.error = \"Zero buffer length\";\n\t\t\treturn (-1);\n\t\t}\n\t\t//endregion\n\n\t\t//region Find tag class\n\t\tconst tagClassMask = intBuffer[0] & 0xC0;\n\n\t\tswitch(tagClassMask)\n\t\t{\n\t\t\tcase 0x00:\n\t\t\t\tthis.tagClass = (1); // UNIVERSAL\n\t\t\t\tbreak;\n\t\t\tcase 0x40:\n\t\t\t\tthis.tagClass = (2); // APPLICATION\n\t\t\t\tbreak;\n\t\t\tcase 0x80:\n\t\t\t\tthis.tagClass = (3); // CONTEXT-SPECIFIC\n\t\t\t\tbreak;\n\t\t\tcase 0xC0:\n\t\t\t\tthis.tagClass = (4); // PRIVATE\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.error = \"Unknown tag class\";\n\t\t\t\treturn (-1);\n\t\t}\n\t\t//endregion\n\n\t\t//region Find it's constructed or not\n\t\tthis.isConstructed = (intBuffer[0] & 0x20) === 0x20;\n\t\t//endregion\n\n\t\t//region Find tag number\n\t\tthis.isHexOnly = false;\n\n\t\tconst tagNumberMask = intBuffer[0] & 0x1F;\n\n\t\t//region Simple case (tag number < 31)\n\t\tif(tagNumberMask !== 0x1F)\n\t\t{\n\t\t\tthis.tagNumber = (tagNumberMask);\n\t\t\tthis.blockLength = 1;\n\t\t}\n\t\t//endregion\n\t\t//region Tag number bigger or equal to 31\n\t\telse\n\t\t{\n\t\t\tlet count = 1;\n\n\t\t\tthis.valueHex = new ArrayBuffer(255);\n\t\t\tlet tagNumberBufferMaxLength = 255;\n\t\t\tlet intTagNumberBuffer = new Uint8Array(this.valueHex);\n\n\t\t\t//noinspection JSBitwiseOperatorUsage\n\t\t\twhile(intBuffer[count] & 0x80)\n\t\t\t{\n\t\t\t\tintTagNumberBuffer[count - 1] = intBuffer[count] & 0x7F;\n\t\t\t\tcount++;\n\n\t\t\t\tif(count >= intBuffer.length)\n\t\t\t\t{\n\t\t\t\t\tthis.error = \"End of input reached before message was fully decoded\";\n\t\t\t\t\treturn (-1);\n\t\t\t\t}\n\n\t\t\t\t//region In case if tag number length is greater than 255 bytes (rare but possible case)\n\t\t\t\tif(count === tagNumberBufferMaxLength)\n\t\t\t\t{\n\t\t\t\t\ttagNumberBufferMaxLength += 255;\n\n\t\t\t\t\tconst tempBuffer = new ArrayBuffer(tagNumberBufferMaxLength);\n\t\t\t\t\tconst tempBufferView = new Uint8Array(tempBuffer);\n\n\t\t\t\t\tfor(let i = 0; i < intTagNumberBuffer.length; i++)\n\t\t\t\t\t\ttempBufferView[i] = intTagNumberBuffer[i];\n\n\t\t\t\t\tthis.valueHex = new ArrayBuffer(tagNumberBufferMaxLength);\n\t\t\t\t\tintTagNumberBuffer = new Uint8Array(this.valueHex);\n\t\t\t\t}\n\t\t\t\t//endregion\n\t\t\t}\n\n\t\t\tthis.blockLength = (count + 1);\n\t\t\tintTagNumberBuffer[count - 1] = intBuffer[count] & 0x7F; // Write last byte to buffer\n\n\t\t\t//region Cut buffer\n\t\t\tconst tempBuffer = new ArrayBuffer(count);\n\t\t\tconst tempBufferView = new Uint8Array(tempBuffer);\n\n\t\t\tfor(let i = 0; i < count; i++)\n\t\t\t\ttempBufferView[i] = intTagNumberBuffer[i];\n\n\t\t\tthis.valueHex = new ArrayBuffer(count);\n\t\t\tintTagNumberBuffer = new Uint8Array(this.valueHex);\n\t\t\tintTagNumberBuffer.set(tempBufferView);\n\t\t\t//endregion\n\n\t\t\t//region Try to convert long tag number to short form\n\t\t\tif(this.blockLength <= 9)\n\t\t\t\tthis.tagNumber = utilFromBase(intTagNumberBuffer, 7);\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.isHexOnly = true;\n\t\t\t\tthis.warnings.push(\"Tag too long, represented as hex-coded\");\n\t\t\t}\n\t\t\t//endregion\n\t\t}\n\t\t//endregion\n\t\t//endregion\n\n\t\t//region Check if constructed encoding was using for primitive type\n\t\tif(((this.tagClass === 1)) &&\n\t\t\t(this.isConstructed))\n\t\t{\n\t\t\tswitch(this.tagNumber)\n\t\t\t{\n\t\t\t\tcase 1:  // Boolean\n\t\t\t\tcase 2:  // REAL\n\t\t\t\tcase 5:  // Null\n\t\t\t\tcase 6:  // OBJECT IDENTIFIER\n\t\t\t\tcase 9:  // REAL\n\t\t\t\tcase 14: // Time\n\t\t\t\tcase 23:\n\t\t\t\tcase 24:\n\t\t\t\tcase 31:\n\t\t\t\tcase 32:\n\t\t\t\tcase 33:\n\t\t\t\tcase 34:\n\t\t\t\t\tthis.error = \"Constructed encoding used for primitive type\";\n\t\t\t\t\treturn (-1);\n\t\t\t\tdefault:\n\t\t\t}\n\t\t}\n\t\t//endregion\n\n\t\treturn (inputOffset + this.blockLength); // Return current offset in input buffer\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName: string,\n\t *  tagClass: number,\n\t *  tagNumber: number,\n\t *  isConstructed: boolean,\n\t *  isHexOnly: boolean,\n\t *  valueHex: ArrayBuffer,\n\t *  blockLength: number,\n\t *  error: string, warnings: Array.<string>,\n\t *  valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.blockName = this.constructor.blockName();\n\t\tobject.tagClass = this.tagClass;\n\t\tobject.tagNumber = this.tagNumber;\n\t\tobject.isConstructed = this.isConstructed;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of length block class\n//**************************************************************************************\nclass LocalLengthBlock extends LocalBaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalLengthBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {Object} [lenBlock]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper();\n\n\t\tif(\"lenBlock\" in parameters)\n\t\t{\n\t\t\tthis.isIndefiniteForm = getParametersValue(parameters.lenBlock, \"isIndefiniteForm\", false);\n\t\t\tthis.longFormUsed = getParametersValue(parameters.lenBlock, \"longFormUsed\", false);\n\t\t\tthis.length = getParametersValue(parameters.lenBlock, \"length\", 0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isIndefiniteForm = false;\n\t\t\tthis.longFormUsed = false;\n\t\t\tthis.length = 0;\n\t\t}\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"lengthBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\t//region Getting Uint8Array from ArrayBuffer\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\t\t//endregion\n\n\t\t//region Initial checks\n\t\tif(intBuffer.length === 0)\n\t\t{\n\t\t\tthis.error = \"Zero buffer length\";\n\t\t\treturn (-1);\n\t\t}\n\n\t\tif(intBuffer[0] === 0xFF)\n\t\t{\n\t\t\tthis.error = \"Length block 0xFF is reserved by standard\";\n\t\t\treturn (-1);\n\t\t}\n\t\t//endregion\n\n\t\t//region Check for length form type\n\t\tthis.isIndefiniteForm = intBuffer[0] === 0x80;\n\t\t//endregion\n\n\t\t//region Stop working in case of indefinite length form\n\t\tif(this.isIndefiniteForm === true)\n\t\t{\n\t\t\tthis.blockLength = 1;\n\t\t\treturn (inputOffset + this.blockLength);\n\t\t}\n\t\t//endregion\n\n\t\t//region Check is long form of length encoding using\n\t\tthis.longFormUsed = !!(intBuffer[0] & 0x80);\n\t\t//endregion\n\n\t\t//region Stop working in case of short form of length value\n\t\tif(this.longFormUsed === false)\n\t\t{\n\t\t\tthis.length = (intBuffer[0]);\n\t\t\tthis.blockLength = 1;\n\t\t\treturn (inputOffset + this.blockLength);\n\t\t}\n\t\t//endregion\n\n\t\t//region Calculate length value in case of long form\n\t\tconst count = intBuffer[0] & 0x7F;\n\n\t\tif(count > 8) // Too big length value\n\t\t{\n\t\t\tthis.error = \"Too big integer\";\n\t\t\treturn (-1);\n\t\t}\n\n\t\tif((count + 1) > intBuffer.length)\n\t\t{\n\t\t\tthis.error = \"End of input reached before message was fully decoded\";\n\t\t\treturn (-1);\n\t\t}\n\n\t\tconst lengthBufferView = new Uint8Array(count);\n\n\t\tfor(let i = 0; i < count; i++)\n\t\t\tlengthBufferView[i] = intBuffer[i + 1];\n\n\t\tif(lengthBufferView[count - 1] === 0x00)\n\t\t\tthis.warnings.push(\"Needlessly long encoded length\");\n\n\t\tthis.length = utilFromBase(lengthBufferView, 8);\n\n\t\tif(this.longFormUsed && (this.length <= 127))\n\t\t\tthis.warnings.push(\"Unneccesary usage of long length form\");\n\n\t\tthis.blockLength = count + 1;\n\t\t//endregion\n\n\t\treturn (inputOffset + this.blockLength); // Return current offset in input buffer\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\t//region Initial variables\n\t\tlet retBuf;\n\t\tlet retView;\n\t\t//endregion\n\n\t\tif(this.length > 127)\n\t\t\tthis.longFormUsed = true;\n\n\t\tif(this.isIndefiniteForm)\n\t\t{\n\t\t\tretBuf = new ArrayBuffer(1);\n\n\t\t\tif(sizeOnly === false)\n\t\t\t{\n\t\t\t\tretView = new Uint8Array(retBuf);\n\t\t\t\tretView[0] = 0x80;\n\t\t\t}\n\n\t\t\treturn retBuf;\n\t\t}\n\n\t\tif(this.longFormUsed === true)\n\t\t{\n\t\t\tconst encodedBuf = utilToBase(this.length, 8);\n\n\t\t\tif(encodedBuf.byteLength > 127)\n\t\t\t{\n\t\t\t\tthis.error = \"Too big length\";\n\t\t\t\treturn (new ArrayBuffer(0));\n\t\t\t}\n\n\t\t\tretBuf = new ArrayBuffer(encodedBuf.byteLength + 1);\n\n\t\t\tif(sizeOnly === true)\n\t\t\t\treturn retBuf;\n\n\t\t\tconst encodedView = new Uint8Array(encodedBuf);\n\t\t\tretView = new Uint8Array(retBuf);\n\n\t\t\tretView[0] = encodedBuf.byteLength | 0x80;\n\n\t\t\tfor(let i = 0; i < encodedBuf.byteLength; i++)\n\t\t\t\tretView[i + 1] = encodedView[i];\n\n\t\t\treturn retBuf;\n\t\t}\n\n\t\tretBuf = new ArrayBuffer(1);\n\n\t\tif(sizeOnly === false)\n\t\t{\n\t\t\tretView = new Uint8Array(retBuf);\n\n\t\t\tretView[0] = this.length;\n\t\t}\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName, blockLength, error, warnings, valueBeforeDecode}|{blockName: string, blockLength: number, error: string, warnings: Array.<string>, valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.blockName = this.constructor.blockName();\n\t\tobject.isIndefiniteForm = this.isIndefiniteForm;\n\t\tobject.longFormUsed = this.longFormUsed;\n\t\tobject.length = this.length;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of value block class\n//**************************************************************************************\nclass LocalValueBlock extends LocalBaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"valueBlock\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedLocalSymbols,JSUnusedLocalSymbols,JSUnusedLocalSymbols\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Throw an exception for a function which needs to be specified in extended classes\n\t\tthrow TypeError(\"User need to make a specific function in a class which extends \\\"LocalValueBlock\\\"\");\n\t\t//endregion\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedLocalSymbols\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\t//region Throw an exception for a function which needs to be specified in extended classes\n\t\tthrow TypeError(\"User need to make a specific function in a class which extends \\\"LocalValueBlock\\\"\");\n\t\t//endregion\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of basic ASN.1 block class\n//**************************************************************************************\nexport class BaseBlock extends LocalBaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"BaseBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {Object} [primitiveSchema]\n\t * @property {string} [name]\n\t * @property {boolean} [optional]\n\t * @param valueBlockType Type of value block\n\t */\n\tconstructor(parameters = {}, valueBlockType = LocalValueBlock)\n\t{\n\t\tsuper(parameters);\n\n\t\tif(\"name\" in parameters)\n\t\t\tthis.name = parameters.name;\n\t\tif(\"optional\" in parameters)\n\t\t\tthis.optional = parameters.optional;\n\t\tif(\"primitiveSchema\" in parameters)\n\t\t\tthis.primitiveSchema = parameters.primitiveSchema;\n\n\t\tthis.idBlock = new LocalIdentificationBlock(parameters);\n\t\tthis.lenBlock = new LocalLengthBlock(parameters);\n\t\tthis.valueBlock = new valueBlockType(parameters);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"BaseBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\tlet retBuf;\n\n\t\tconst idBlockBuf = this.idBlock.toBER(sizeOnly);\n\t\tconst valueBlockSizeBuf = this.valueBlock.toBER(true);\n\n\t\tthis.lenBlock.length = valueBlockSizeBuf.byteLength;\n\t\tconst lenBlockBuf = this.lenBlock.toBER(sizeOnly);\n\n\t\tretBuf = utilConcatBuf(idBlockBuf, lenBlockBuf);\n\n\t\tlet valueBlockBuf;\n\n\t\tif(sizeOnly === false)\n\t\t\tvalueBlockBuf = this.valueBlock.toBER(sizeOnly);\n\t\telse\n\t\t\tvalueBlockBuf = new ArrayBuffer(this.lenBlock.length);\n\n\t\tretBuf = utilConcatBuf(retBuf, valueBlockBuf);\n\n\t\tif(this.lenBlock.isIndefiniteForm === true)\n\t\t{\n\t\t\tconst indefBuf = new ArrayBuffer(2);\n\n\t\t\tif(sizeOnly === false)\n\t\t\t{\n\t\t\t\tconst indefView = new Uint8Array(indefBuf);\n\n\t\t\t\tindefView[0] = 0x00;\n\t\t\t\tindefView[1] = 0x00;\n\t\t\t}\n\n\t\t\tretBuf = utilConcatBuf(retBuf, indefBuf);\n\t\t}\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName, blockLength, error, warnings, valueBeforeDecode}|{blockName: string, blockLength: number, error: string, warnings: Array.<string>, valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.idBlock = this.idBlock.toJSON();\n\t\tobject.lenBlock = this.lenBlock.toJSON();\n\t\tobject.valueBlock = this.valueBlock.toJSON();\n\n\t\tif(\"name\" in this)\n\t\t\tobject.name = this.name;\n\t\tif(\"optional\" in this)\n\t\t\tobject.optional = this.optional;\n\t\tif(\"primitiveSchema\" in this)\n\t\t\tobject.primitiveSchema = this.primitiveSchema.toJSON();\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of basic block for all PRIMITIVE types\n//**************************************************************************************\nclass LocalPrimitiveValueBlock extends LocalValueBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalPrimitiveValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueBeforeDecode]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\t//region Variables from \"hexBlock\" class\n\t\tif(\"valueHex\" in parameters)\n\t\t\tthis.valueHex = parameters.valueHex.slice(0);\n\t\telse\n\t\t\tthis.valueHex = new ArrayBuffer(0);\n\n\t\tthis.isHexOnly = getParametersValue(parameters, \"isHexOnly\", true);\n\t\t//endregion\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\t//region Getting Uint8Array from ArrayBuffer\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\t\t//endregion\n\n\t\t//region Initial checks\n\t\tif(intBuffer.length === 0)\n\t\t{\n\t\t\tthis.warnings.push(\"Zero buffer length\");\n\t\t\treturn inputOffset;\n\t\t}\n\t\t//endregion\n\n\t\t//region Copy input buffer into internal buffer\n\t\tthis.valueHex = new ArrayBuffer(intBuffer.length);\n\t\tconst valueHexView = new Uint8Array(this.valueHex);\n\n\t\tfor(let i = 0; i < intBuffer.length; i++)\n\t\t\tvalueHexView[i] = intBuffer[i];\n\t\t//endregion\n\n\t\tthis.blockLength = inputLength;\n\n\t\treturn (inputOffset + inputLength);\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedLocalSymbols\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\treturn this.valueHex.slice(0);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"PrimitiveValueBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName, blockLength, error, warnings, valueBeforeDecode}|{blockName: string, blockLength: number, error: string, warnings: Array.<string>, valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.valueHex = bufferToHexCodes(this.valueHex, 0, this.valueHex.byteLength);\n\t\tobject.isHexOnly = this.isHexOnly;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class Primitive extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Primitive\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalPrimitiveValueBlock);\n\n\t\tthis.idBlock.isConstructed = false;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"PRIMITIVE\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of basic block for all CONSTRUCTED types\n//**************************************************************************************\nclass LocalConstructedValueBlock extends LocalValueBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalConstructedValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.value = getParametersValue(parameters, \"value\", []);\n\t\tthis.isIndefiniteForm = getParametersValue(parameters, \"isIndefiniteForm\", false);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Store initial offset and length\n\t\tconst initialOffset = inputOffset;\n\t\tconst initialLength = inputLength;\n\t\t//endregion\n\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\t//region Getting Uint8Array from ArrayBuffer\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\t\t//endregion\n\n\t\t//region Initial checks\n\t\tif(intBuffer.length === 0)\n\t\t{\n\t\t\tthis.warnings.push(\"Zero buffer length\");\n\t\t\treturn inputOffset;\n\t\t}\n\t\t//endregion\n\n\t\t//region Aux function\n\t\tfunction checkLen(indefiniteLength, length)\n\t\t{\n\t\t\tif(indefiniteLength === true)\n\t\t\t\treturn 1;\n\n\t\t\treturn length;\n\t\t}\n\t\t//endregion\n\n\t\tlet currentOffset = inputOffset;\n\n\t\twhile(checkLen(this.isIndefiniteForm, inputLength) > 0)\n\t\t{\n\t\t\tconst returnObject = LocalFromBER(inputBuffer, currentOffset, inputLength);\n\t\t\tif(returnObject.offset === (-1))\n\t\t\t{\n\t\t\t\tthis.error = returnObject.result.error;\n\t\t\t\tthis.warnings.concat(returnObject.result.warnings);\n\t\t\t\treturn (-1);\n\t\t\t}\n\n\t\t\tcurrentOffset = returnObject.offset;\n\n\t\t\tthis.blockLength += returnObject.result.blockLength;\n\t\t\tinputLength -= returnObject.result.blockLength;\n\n\t\t\tthis.value.push(returnObject.result);\n\n\t\t\tif((this.isIndefiniteForm === true) && (returnObject.result.constructor.blockName() === EndOfContent.blockName()))\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(this.isIndefiniteForm === true)\n\t\t{\n\t\t\tif(this.value[this.value.length - 1].constructor.blockName() === EndOfContent.blockName())\n\t\t\t\tthis.value.pop();\n\t\t\telse\n\t\t\t\tthis.warnings.push(\"No EndOfContent block encoded\");\n\t\t}\n\n\t\t//region Copy \"inputBuffer\" to \"valueBeforeDecode\"\n\t\tthis.valueBeforeDecode = inputBuffer.slice(initialOffset, initialOffset + initialLength);\n\t\t//endregion\n\n\t\treturn currentOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\tlet retBuf = new ArrayBuffer(0);\n\n\t\tfor(let i = 0; i < this.value.length; i++)\n\t\t{\n\t\t\tconst valueBuf = this.value[i].toBER(sizeOnly);\n\t\t\tretBuf = utilConcatBuf(retBuf, valueBuf);\n\t\t}\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"ConstructedValueBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName, blockLength, error, warnings, valueBeforeDecode}|{blockName: string, blockLength: number, error: string, warnings: Array.<string>, valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.isIndefiniteForm = this.isIndefiniteForm;\n\t\tobject.value = [];\n\t\tfor(let i = 0; i < this.value.length; i++)\n\t\t\tobject.value.push(this.value[i].toJSON());\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class Constructed extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Constructed\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalConstructedValueBlock);\n\n\t\tthis.idBlock.isConstructed = true;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"CONSTRUCTED\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tthis.valueBlock.isIndefiniteForm = this.lenBlock.isIndefiniteForm;\n\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 EndOfContent type class\n//**************************************************************************************\nclass LocalEndOfContentValueBlock extends LocalValueBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalEndOfContentValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedLocalSymbols,JSUnusedLocalSymbols\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number}\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region There is no \"value block\" for EndOfContent type and we need to return the same offset\n\t\treturn inputOffset;\n\t\t//endregion\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedLocalSymbols\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\treturn new ArrayBuffer(0);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"EndOfContentValueBlock\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class EndOfContent extends BaseBlock\n{\n\t//**********************************************************************************\n\tconstructor(paramaters = {})\n\t{\n\t\tsuper(paramaters, LocalEndOfContentValueBlock);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 0; // EndOfContent\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"EndOfContent\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 Boolean type class\n//**************************************************************************************\nclass LocalBooleanValueBlock extends LocalValueBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalBooleanValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\t\t\n\t\tthis.value = getParametersValue(parameters, \"value\", false);\n\t\tthis.isHexOnly = getParametersValue(parameters, \"isHexOnly\", false);\n\t\t\n\t\tif(\"valueHex\" in parameters)\n\t\t\tthis.valueHex = parameters.valueHex.slice(0);\n\t\telse\n\t\t{\n\t\t\tthis.valueHex = new ArrayBuffer(1);\n\t\t\tif(this.value === true)\n\t\t\t{\n\t\t\t\tconst view = new Uint8Array(this.valueHex);\n\t\t\t\tview[0] = 0xFF;\n\t\t\t}\n\t\t}\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\t//region Getting Uint8Array from ArrayBuffer\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\t\t//endregion\n\n\t\tif(inputLength > 1)\n\t\t\tthis.warnings.push(\"Boolean value encoded in more then 1 octet\");\n\n\t\tthis.isHexOnly = true;\n\n\t\t//region Copy input buffer to internal array\n\t\tthis.valueHex = new ArrayBuffer(intBuffer.length);\n\t\tconst view = new Uint8Array(this.valueHex);\n\n\t\tfor(let i = 0; i < intBuffer.length; i++)\n\t\t\tview[i] = intBuffer[i];\n\t\t//endregion\n\t\t\n\t\tif(utilDecodeTC.call(this) !== 0 )\n\t\t\tthis.value = true;\n\t\telse\n\t\t\tthis.value = false;\n\n\t\tthis.blockLength = inputLength;\n\n\t\treturn (inputOffset + inputLength);\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedLocalSymbols\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\treturn this.valueHex;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"BooleanValueBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName, blockLength, error, warnings, valueBeforeDecode}|{blockName: string, blockLength: number, error: string, warnings: Array.<string>, valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.value = this.value;\n\t\tobject.isHexOnly = this.isHexOnly;\n\t\tobject.valueHex = bufferToHexCodes(this.valueHex, 0, this.valueHex.byteLength);\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class Boolean extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Boolean\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalBooleanValueBlock);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 1; // Boolean\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"Boolean\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 Sequence and Set type classes\n//**************************************************************************************\nexport class Sequence extends Constructed\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Sequence\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 16; // Sequence\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"Sequence\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class Set extends Constructed\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Set\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 17; // Set\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"Set\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 Null type class\n//**************************************************************************************\nexport class Null extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Null\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalBaseBlock); // We will not have a call to \"Null value block\" because of specified \"fromBER\" and \"toBER\" functions\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 5; // Null\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"Null\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedLocalSymbols\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tif(this.lenBlock.length > 0)\n\t\t\tthis.warnings.push(\"Non-zero length of value block for Null type\");\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\t\t\n\t\tthis.blockLength += inputLength;\n\t\t\n\t\tif((inputOffset + inputLength) > inputBuffer.byteLength)\n\t\t{\n\t\t\tthis.error = \"End of input reached before message was fully decoded (inconsistent offset and length values)\";\n\t\t\treturn (-1);\n\t\t}\n\t\t\n\t\treturn (inputOffset + inputLength);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\tconst retBuf = new ArrayBuffer(2);\n\n\t\tif(sizeOnly === true)\n\t\t\treturn retBuf;\n\n\t\tconst retView = new Uint8Array(retBuf);\n\t\tretView[0] = 0x05;\n\t\tretView[1] = 0x00;\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 OctetString type class\n//**************************************************************************************\nclass LocalOctetStringValueBlock extends LocalHexBlock(LocalConstructedValueBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalOctetStringValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.isConstructed = getParametersValue(parameters, \"isConstructed\", false);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tlet resultOffset = 0;\n\n\t\tif(this.isConstructed === true)\n\t\t{\n\t\t\tthis.isHexOnly = false;\n\n\t\t\tresultOffset = LocalConstructedValueBlock.prototype.fromBER.call(this, inputBuffer, inputOffset, inputLength);\n\t\t\tif(resultOffset === (-1))\n\t\t\t\treturn resultOffset;\n\n\t\t\tfor(let i = 0; i < this.value.length; i++)\n\t\t\t{\n\t\t\t\tconst currentBlockName = this.value[i].constructor.blockName();\n\n\t\t\t\tif(currentBlockName === EndOfContent.blockName())\n\t\t\t\t{\n\t\t\t\t\tif(this.isIndefiniteForm === true)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.error = \"EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only\";\n\t\t\t\t\t\treturn (-1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(currentBlockName !== OctetString.blockName())\n\t\t\t\t{\n\t\t\t\t\tthis.error = \"OCTET STRING may consists of OCTET STRINGs only\";\n\t\t\t\t\treturn (-1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isHexOnly = true;\n\n\t\t\tresultOffset = super.fromBER(inputBuffer, inputOffset, inputLength);\n\t\t\tthis.blockLength = inputLength;\n\t\t}\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\tif(this.isConstructed === true)\n\t\t\treturn LocalConstructedValueBlock.prototype.toBER.call(this, sizeOnly);\n\n\t\tlet retBuf = new ArrayBuffer(this.valueHex.byteLength);\n\n\t\tif(sizeOnly === true)\n\t\t\treturn retBuf;\n\n\t\tif(this.valueHex.byteLength === 0)\n\t\t\treturn retBuf;\n\n\t\tretBuf = this.valueHex.slice(0);\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"OctetStringValueBlock\";\n\t}\n\t//**********************************************************************************\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.isConstructed = this.isConstructed;\n\t\tobject.isHexOnly = this.isHexOnly;\n\t\tobject.valueHex = bufferToHexCodes(this.valueHex, 0, this.valueHex.byteLength);\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class OctetString extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"OctetString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalOctetStringValueBlock);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 4; // OctetString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tthis.valueBlock.isConstructed = this.idBlock.isConstructed;\n\t\tthis.valueBlock.isIndefiniteForm = this.lenBlock.isIndefiniteForm;\n\n\t\t//region Ability to encode empty OCTET STRING\n\t\tif(inputLength === 0)\n\t\t{\n\t\t\tif(this.idBlock.error.length === 0)\n\t\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\t\tif(this.lenBlock.error.length === 0)\n\t\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\t\treturn inputOffset;\n\t\t}\n\t\t//endregion\n\n\t\treturn super.fromBER(inputBuffer, inputOffset, inputLength);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"OctetString\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Checking that two OCTETSTRINGs are equal\n\t * @param {OctetString} octetString\n\t */\n\tisEqual(octetString)\n\t{\n\t\t//region Check input type\n\t\tif((octetString instanceof OctetString) === false)\n\t\t\treturn false;\n\t\t//endregion\n\n\t\t//region Compare two JSON strings\n\t\tif(JSON.stringify(this) !== JSON.stringify(octetString))\n\t\t\treturn false;\n\t\t//endregion\n\n\t\treturn true;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 BitString type class\n//**************************************************************************************\nclass LocalBitStringValueBlock extends LocalHexBlock(LocalConstructedValueBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalBitStringValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.unusedBits = getParametersValue(parameters, \"unusedBits\", 0);\n\t\tthis.isConstructed = getParametersValue(parameters, \"isConstructed\", false);\n\t\tthis.blockLength = this.valueHex.byteLength;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Ability to decode zero-length BitString value\n\t\tif(inputLength === 0)\n\t\t\treturn inputOffset;\n\t\t//endregion\n\n\t\tlet resultOffset = (-1);\n\n\t\t//region If the BISTRING supposed to be a constructed value\n\t\tif(this.isConstructed === true)\n\t\t{\n\t\t\tresultOffset = LocalConstructedValueBlock.prototype.fromBER.call(this, inputBuffer, inputOffset, inputLength);\n\t\t\tif(resultOffset === (-1))\n\t\t\t\treturn resultOffset;\n\n\t\t\tfor(let i = 0; i < this.value.length; i++)\n\t\t\t{\n\t\t\t\tconst currentBlockName = this.value[i].constructor.blockName();\n\n\t\t\t\tif(currentBlockName === EndOfContent.blockName())\n\t\t\t\t{\n\t\t\t\t\tif(this.isIndefiniteForm === true)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.error = \"EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only\";\n\t\t\t\t\t\treturn (-1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(currentBlockName !== BitString.blockName())\n\t\t\t\t{\n\t\t\t\t\tthis.error = \"BIT STRING may consists of BIT STRINGs only\";\n\t\t\t\t\treturn (-1);\n\t\t\t\t}\n\n\t\t\t\tif((this.unusedBits > 0) && (this.value[i].valueBlock.unusedBits > 0))\n\t\t\t\t{\n\t\t\t\t\tthis.error = \"Usign of \\\"unused bits\\\" inside constructive BIT STRING allowed for least one only\";\n\t\t\t\t\treturn (-1);\n\t\t\t\t}\n\n\t\t\t\tthis.unusedBits = this.value[i].valueBlock.unusedBits;\n\t\t\t\tif(this.unusedBits > 7)\n\t\t\t\t{\n\t\t\t\t\tthis.error = \"Unused bits for BitString must be in range 0-7\";\n\t\t\t\t\treturn (-1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn resultOffset;\n\t\t}\n\t\t//endregion\n\t\t//region If the BitString supposed to be a primitive value\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\n\t\tthis.unusedBits = intBuffer[0];\n\t\t\n\t\tif(this.unusedBits > 7)\n\t\t{\n\t\t\tthis.error = \"Unused bits for BitString must be in range 0-7\";\n\t\t\treturn (-1);\n\t\t}\n\n\t\t//region Copy input buffer to internal buffer\n\t\tthis.valueHex = new ArrayBuffer(intBuffer.length - 1);\n\t\tconst view = new Uint8Array(this.valueHex);\n\t\tfor(let i = 0; i < (inputLength - 1); i++)\n\t\t\tview[i] = intBuffer[i + 1];\n\t\t//endregion\n\n\t\tthis.blockLength = intBuffer.length;\n\n\t\treturn (inputOffset + inputLength);\n\t\t//endregion\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\tif(this.isConstructed === true)\n\t\t\treturn LocalConstructedValueBlock.prototype.toBER.call(this, sizeOnly);\n\n\t\tif(sizeOnly === true)\n\t\t\treturn (new ArrayBuffer(this.valueHex.byteLength + 1));\n\n\t\tif(this.valueHex.byteLength === 0)\n\t\t\treturn (new ArrayBuffer(0));\n\n\t\tconst curView = new Uint8Array(this.valueHex);\n\n\t\tconst retBuf = new ArrayBuffer(this.valueHex.byteLength + 1);\n\t\tconst retView = new Uint8Array(retBuf);\n\n\t\tretView[0] = this.unusedBits;\n\n\t\tfor(let i = 0; i < this.valueHex.byteLength; i++)\n\t\t\tretView[i + 1] = curView[i];\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"BitStringValueBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {{blockName, blockLength, error, warnings, valueBeforeDecode}|{blockName: string, blockLength: number, error: string, warnings: Array.<string>, valueBeforeDecode: string}}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.unusedBits = this.unusedBits;\n\t\tobject.isConstructed = this.isConstructed;\n\t\tobject.isHexOnly = this.isHexOnly;\n\t\tobject.valueHex = bufferToHexCodes(this.valueHex, 0, this.valueHex.byteLength);\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class BitString extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"BitString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalBitStringValueBlock);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 3; // BitString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"BitString\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\t//region Ability to encode empty BitString\n\t\tif(inputLength === 0)\n\t\t\treturn inputOffset;\n\t\t//endregion\n\n\t\tthis.valueBlock.isConstructed = this.idBlock.isConstructed;\n\t\tthis.valueBlock.isIndefiniteForm = this.lenBlock.isIndefiniteForm;\n\n\t\treturn super.fromBER(inputBuffer, inputOffset, inputLength);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Checking that two BITSTRINGs are equal\n\t * @param {BitString} bitString\n\t */\n\tisEqual(bitString)\n\t{\n\t\t//region Check input type\n\t\tif((bitString instanceof BitString) === false)\n\t\t\treturn false;\n\t\t//endregion\n\n\t\t//region Compare two JSON strings\n\t\tif(JSON.stringify(this) !== JSON.stringify(bitString))\n\t\t\treturn false;\n\t\t//endregion\n\n\t\treturn true;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 Integer type class\n//**************************************************************************************\n/**\n * @extends LocalValueBlock\n */\nclass LocalIntegerValueBlock extends LocalHexBlock(LocalValueBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalIntegerValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tif(\"value\" in parameters)\n\t\t\tthis.valueDec = parameters.value;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Setter for \"valueHex\"\n\t * @param {ArrayBuffer} _value\n\t */\n\tset valueHex(_value)\n\t{\n\t\tthis._valueHex = _value.slice(0);\n\n\t\tif(_value.byteLength >= 4)\n\t\t{\n\t\t\tthis.warnings.push(\"Too big Integer for decoding, hex only\");\n\t\t\tthis.isHexOnly = true;\n\t\t\tthis._valueDec = 0;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isHexOnly = false;\n\n\t\t\tif(_value.byteLength > 0)\n\t\t\t\tthis._valueDec = utilDecodeTC.call(this);\n\t\t}\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Getter for \"valueHex\"\n\t * @returns {ArrayBuffer}\n\t */\n\tget valueHex()\n\t{\n\t\treturn this._valueHex;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Getter for \"valueDec\"\n\t * @param {number} _value\n\t */\n\tset valueDec(_value)\n\t{\n\t\tthis._valueDec = _value;\n\n\t\tthis.isHexOnly = false;\n\t\tthis._valueHex = utilEncodeTC(_value);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Getter for \"valueDec\"\n\t * @returns {number}\n\t */\n\tget valueDec()\n\t{\n\t\treturn this._valueDec;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from DER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 DER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 DER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @param {number} [expectedLength=0] Expected length of converted \"valueHex\" buffer\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromDER(inputBuffer, inputOffset, inputLength, expectedLength = 0)\n\t{\n\t\tconst offset = this.fromBER(inputBuffer, inputOffset, inputLength);\n\t\tif(offset === (-1))\n\t\t\treturn offset;\n\n\t\tconst view = new Uint8Array(this._valueHex);\n\n\t\tif((view[0] === 0x00) && ((view[1] & 0x80) !== 0))\n\t\t{\n\t\t\tconst updatedValueHex = new ArrayBuffer(this._valueHex.byteLength - 1);\n\t\t\tconst updatedView = new Uint8Array(updatedValueHex);\n\n\t\t\tupdatedView.set(new Uint8Array(this._valueHex, 1, this._valueHex.byteLength - 1));\n\n\t\t\tthis._valueHex = updatedValueHex.slice(0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(expectedLength !== 0)\n\t\t\t{\n\t\t\t\tif(this._valueHex.byteLength < expectedLength)\n\t\t\t\t{\n\t\t\t\t\tif((expectedLength - this._valueHex.byteLength) > 1)\n\t\t\t\t\t\texpectedLength = this._valueHex.byteLength + 1;\n\t\t\t\t\t\n\t\t\t\t\tconst updatedValueHex = new ArrayBuffer(expectedLength);\n\t\t\t\t\tconst updatedView = new Uint8Array(updatedValueHex);\n\n\t\t\t\t\tupdatedView.set(view, expectedLength - this._valueHex.byteLength);\n\n\t\t\t\t\tthis._valueHex = updatedValueHex.slice(0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn offset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (DER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoDER(sizeOnly = false)\n\t{\n\t\tconst view = new Uint8Array(this._valueHex);\n\n\t\tswitch(true)\n\t\t{\n\t\t\tcase ((view[0] & 0x80) !== 0):\n\t\t\t\t{\n\t\t\t\t\tconst updatedValueHex = new ArrayBuffer(this._valueHex.byteLength + 1);\n\t\t\t\t\tconst updatedView = new Uint8Array(updatedValueHex);\n\n\t\t\t\t\tupdatedView[0] = 0x00;\n\t\t\t\t\tupdatedView.set(view, 1);\n\n\t\t\t\t\tthis._valueHex = updatedValueHex.slice(0);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ((view[0] === 0x00) && ((view[1] & 0x80) === 0)):\n\t\t\t\t{\n\t\t\t\t\tconst updatedValueHex = new ArrayBuffer(this._valueHex.byteLength - 1);\n\t\t\t\t\tconst updatedView = new Uint8Array(updatedValueHex);\n\n\t\t\t\t\tupdatedView.set(new Uint8Array(this._valueHex, 1, this._valueHex.byteLength - 1));\n\n\t\t\t\t\tthis._valueHex = updatedValueHex.slice(0);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\n\t\treturn this.toBER(sizeOnly);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = super.fromBER(inputBuffer, inputOffset, inputLength);\n\t\tif(resultOffset === (-1))\n\t\t\treturn resultOffset;\n\n\t\tthis.blockLength = inputLength;\n\n\t\treturn (inputOffset + inputLength);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\t//noinspection JSCheckFunctionSignatures\n\t\treturn this.valueHex.slice(0);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"IntegerValueBlock\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.valueDec = this.valueDec;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convert current value to decimal string representation\n\t */\n\ttoString()\n\t{\n\t\t//region Aux functions\n\t\tfunction viewAdd(first, second)\n\t\t{\n\t\t\t//region Initial variables\n\t\t\tconst c = new Uint8Array([0]);\n\t\t\t\n\t\t\tlet firstView = new Uint8Array(first);\n\t\t\tlet secondView = new Uint8Array(second);\n\t\t\t\n\t\t\tlet firstViewCopy = firstView.slice(0);\n\t\t\tconst firstViewCopyLength = firstViewCopy.length - 1;\n\t\t\tlet secondViewCopy = secondView.slice(0);\n\t\t\tconst secondViewCopyLength = secondViewCopy.length - 1;\n\t\t\t\n\t\t\tlet value = 0;\n\t\t\t\n\t\t\tconst max = (secondViewCopyLength < firstViewCopyLength) ? firstViewCopyLength : secondViewCopyLength;\n\t\t\t\n\t\t\tlet counter = 0;\n\t\t\t//endregion\n\t\t\t\n\t\t\tfor(let i = max; i >= 0; i--, counter++)\n\t\t\t{\n\t\t\t\tswitch(true)\n\t\t\t\t{\n\t\t\t\t\tcase (counter < secondViewCopy.length):\n\t\t\t\t\t\tvalue = firstViewCopy[firstViewCopyLength - counter] + secondViewCopy[secondViewCopyLength - counter] + c[0];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = firstViewCopy[firstViewCopyLength - counter] + c[0];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tc[0] = value / 10;\n\t\t\t\t\n\t\t\t\tswitch(true)\n\t\t\t\t{\n\t\t\t\t\tcase (counter >= firstViewCopy.length):\n\t\t\t\t\t\tfirstViewCopy = utilConcatView(new Uint8Array([value % 10]), firstViewCopy);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tfirstViewCopy[firstViewCopyLength - counter] = value % 10;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(c[0] > 0)\n\t\t\t\tfirstViewCopy = utilConcatView(c, firstViewCopy);\n\t\t\t\n\t\t\treturn firstViewCopy.slice(0);\n\t\t}\n\t\t\n\t\tfunction power2(n)\n\t\t{\n\t\t\tif(n >= powers2.length)\n\t\t\t{\n\t\t\t\tfor(let p = powers2.length; p <= n; p++)\n\t\t\t\t{\n\t\t\t\t\tconst c = new Uint8Array([0]);\n\t\t\t\t\tlet digits = (powers2[p - 1]).slice(0);\n\t\t\t\t\t\n\t\t\t\t\tfor(let i = (digits.length - 1); i >=0; i--)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst newValue = new Uint8Array([(digits[i] << 1) + c[0]]);\n\t\t\t\t\t\tc[0] = newValue[0] / 10;\n\t\t\t\t\t\tdigits[i] = newValue[0] % 10;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (c[0] > 0)\n\t\t\t\t\t\tdigits = utilConcatView(c, digits);\n\t\t\t\t\t\n\t\t\t\t\tpowers2.push(digits);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn powers2[n];\n\t\t}\n\t\t\n\t\tfunction viewSub(first, second)\n\t\t{\n\t\t\t//region Initial variables\n\t\t\tlet b = 0;\n\t\t\t\n\t\t\tlet firstView = new Uint8Array(first);\n\t\t\tlet secondView = new Uint8Array(second);\n\t\t\t\n\t\t\tlet firstViewCopy = firstView.slice(0);\n\t\t\tconst firstViewCopyLength = firstViewCopy.length - 1;\n\t\t\tlet secondViewCopy = secondView.slice(0);\n\t\t\tconst secondViewCopyLength = secondViewCopy.length - 1;\n\t\t\t\n\t\t\tlet value;\n\t\t\t\n\t\t\tlet counter = 0;\n\t\t\t//endregion\n\t\t\t\n\t\t\tfor(let i = secondViewCopyLength; i >= 0; i--, counter++)\n\t\t\t{\n\t\t\t\tvalue = firstViewCopy[firstViewCopyLength - counter] - secondViewCopy[secondViewCopyLength - counter] - b;\n\t\t\t\t\n\t\t\t\tswitch(true)\n\t\t\t\t{\n\t\t\t\t\tcase (value < 0):\n\t\t\t\t\t\tb = 1;\n\t\t\t\t\t\tfirstViewCopy[firstViewCopyLength - counter] = value + 10;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tb = 0;\n\t\t\t\t\t\tfirstViewCopy[firstViewCopyLength - counter] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(b > 0)\n\t\t\t{\n\t\t\t\tfor(let i = (firstViewCopyLength - secondViewCopyLength + 1); i >= 0; i--, counter++)\n\t\t\t\t{\n\t\t\t\t\tvalue = firstViewCopy[firstViewCopyLength - counter] - b;\n\t\t\t\t\t\n\t\t\t\t\tif(value < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tb = 1;\n\t\t\t\t\t\tfirstViewCopy[firstViewCopyLength - counter] = value + 10;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tb = 0;\n\t\t\t\t\t\tfirstViewCopy[firstViewCopyLength - counter] = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn firstViewCopy.slice();\n\t\t}\n\t\t//endregion\n\t\t\n\t\t//region Initial variables\n\t\tconst firstBit = (this._valueHex.byteLength * 8) - 1;\n\t\t\n\t\tlet digits = new Uint8Array((this._valueHex.byteLength * 8) / 3);\n\t\tlet bitNumber = 0;\n\t\tlet currentByte;\n\t\t\n\t\tconst asn1View = new Uint8Array(this._valueHex);\n\t\t\n\t\tlet result = \"\";\n\t\t\n\t\tlet flag = false;\n\t\t//endregion\n\t\t\n\t\t//region Calculate number\n\t\tfor(let byteNumber = (this._valueHex.byteLength - 1); byteNumber >= 0; byteNumber--)\n\t\t{\n\t\t\tcurrentByte = asn1View[byteNumber];\n\t\t\t\n\t\t\tfor(let i = 0; i < 8; i++)\n\t\t\t{\n\t\t\t\tif((currentByte & 1) === 1)\n\t\t\t\t{\n\t\t\t\t\tswitch(bitNumber)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase firstBit:\n\t\t\t\t\t\t\tdigits = viewSub(power2(bitNumber), digits);\n\t\t\t\t\t\t\tresult = \"-\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tdigits = viewAdd(digits, power2(bitNumber));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tbitNumber++;\n\t\t\t\tcurrentByte >>= 1;\n\t\t\t}\n\t\t}\n\t\t//endregion\n\t\t\n\t\t//region Print number\n\t\tfor(let i = 0; i < digits.length; i++)\n\t\t{\n\t\t\tif(digits[i])\n\t\t\t\tflag = true;\n\t\t\t\n\t\t\tif(flag)\n\t\t\t\tresult += digitsString.charAt(digits[i]);\n\t\t}\n\t\t\n\t\tif(flag === false)\n\t\t\tresult += digitsString.charAt(0);\n\t\t//endregion\n\t\t\n\t\treturn result;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nexport class Integer extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Integer\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalIntegerValueBlock);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 2; // Integer\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"Integer\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Compare two Integer object, or Integer and ArrayBuffer objects\n\t * @param {!Integer|ArrayBuffer} otherValue\n\t * @returns {boolean}\n\t */\n\tisEqual(otherValue)\n\t{\n\t\tif(otherValue instanceof Integer)\n\t\t{\n\t\t\tif(this.valueBlock.isHexOnly && otherValue.valueBlock.isHexOnly) // Compare two ArrayBuffers\n\t\t\t\treturn isEqualBuffer(this.valueBlock.valueHex, otherValue.valueBlock.valueHex);\n\n\t\t\tif(this.valueBlock.isHexOnly === otherValue.valueBlock.isHexOnly)\n\t\t\t\treturn (this.valueBlock.valueDec === otherValue.valueBlock.valueDec);\n\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif(otherValue instanceof ArrayBuffer)\n\t\t\treturn isEqualBuffer(this.valueBlock.valueHex, otherValue);\n\n\t\treturn false;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convert current Integer value from BER into DER format\n\t * @returns {Integer}\n\t */\n\tconvertToDER()\n\t{\n\t\tconst integer = new Integer({ valueHex: this.valueBlock.valueHex });\n\t\tinteger.valueBlock.toDER();\n\n\t\treturn integer;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convert current Integer value from DER to BER format\n\t * @returns {Integer}\n\t */\n\tconvertFromDER()\n\t{\n\t\tconst expectedLength = (this.valueBlock.valueHex.byteLength % 2) ? (this.valueBlock.valueHex.byteLength + 1) : this.valueBlock.valueHex.byteLength;\n\t\tconst integer = new Integer({ valueHex: this.valueBlock.valueHex });\n\t\tinteger.valueBlock.fromDER(integer.valueBlock.valueHex, 0, integer.valueBlock.valueHex.byteLength, expectedLength);\n\t\t\n\t\treturn integer;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 Enumerated type class\n//**************************************************************************************\nexport class Enumerated extends Integer\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Enumerated\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 10; // Enumerated\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"Enumerated\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of ASN.1 ObjectIdentifier type class\n//**************************************************************************************\nclass LocalSidValueBlock extends LocalHexBlock(LocalBaseBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalSidValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {number} [valueDec]\n\t * @property {boolean} [isFirstSid]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.valueDec = getParametersValue(parameters, \"valueDec\", -1);\n\t\tthis.isFirstSid = getParametersValue(parameters, \"isFirstSid\", false);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"sidBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tif(inputLength === 0)\n\t\t\treturn inputOffset;\n\n\t\t//region Basic check for parameters\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tif(checkBufferParams(this, inputBuffer, inputOffset, inputLength) === false)\n\t\t\treturn (-1);\n\t\t//endregion\n\n\t\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\n\t\tthis.valueHex = new ArrayBuffer(inputLength);\n\t\tlet view = new Uint8Array(this.valueHex);\n\n\t\tfor(let i = 0; i < inputLength; i++)\n\t\t{\n\t\t\tview[i] = intBuffer[i] & 0x7F;\n\n\t\t\tthis.blockLength++;\n\n\t\t\tif((intBuffer[i] & 0x80) === 0x00)\n\t\t\t\tbreak;\n\t\t}\n\n\t\t//region Ajust size of valueHex buffer\n\t\tconst tempValueHex = new ArrayBuffer(this.blockLength);\n\t\tconst tempView = new Uint8Array(tempValueHex);\n\n\t\tfor(let i = 0; i < this.blockLength; i++)\n\t\t\ttempView[i] = view[i];\n\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tthis.valueHex = tempValueHex.slice(0);\n\t\tview = new Uint8Array(this.valueHex);\n\t\t//endregion\n\n\t\tif((intBuffer[this.blockLength - 1] & 0x80) !== 0x00)\n\t\t{\n\t\t\tthis.error = \"End of input reached before message was fully decoded\";\n\t\t\treturn (-1);\n\t\t}\n\n\t\tif(view[0] === 0x00)\n\t\t\tthis.warnings.push(\"Needlessly long format of SID encoding\");\n\n\t\tif(this.blockLength <= 8)\n\t\t\tthis.valueDec = utilFromBase(view, 7);\n\t\telse\n\t\t{\n\t\t\tthis.isHexOnly = true;\n\t\t\tthis.warnings.push(\"Too big SID for decoding, hex only\");\n\t\t}\n\n\t\treturn (inputOffset + this.blockLength);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\t//region Initial variables\n\t\tlet retBuf;\n\t\tlet retView;\n\t\t//endregion\n\n\t\tif(this.isHexOnly)\n\t\t{\n\t\t\tif(sizeOnly === true)\n\t\t\t\treturn (new ArrayBuffer(this.valueHex.byteLength));\n\n\t\t\tconst curView = new Uint8Array(this.valueHex);\n\n\t\t\tretBuf = new ArrayBuffer(this.blockLength);\n\t\t\tretView = new Uint8Array(retBuf);\n\n\t\t\tfor(let i = 0; i < (this.blockLength - 1); i++)\n\t\t\t\tretView[i] = curView[i] | 0x80;\n\n\t\t\tretView[this.blockLength - 1] = curView[this.blockLength - 1];\n\n\t\t\treturn retBuf;\n\t\t}\n\n\t\tconst encodedBuf = utilToBase(this.valueDec, 7);\n\t\tif(encodedBuf.byteLength === 0)\n\t\t{\n\t\t\tthis.error = \"Error during encoding SID value\";\n\t\t\treturn (new ArrayBuffer(0));\n\t\t}\n\n\t\tretBuf = new ArrayBuffer(encodedBuf.byteLength);\n\n\t\tif(sizeOnly === false)\n\t\t{\n\t\t\tconst encodedView = new Uint8Array(encodedBuf);\n\t\t\tretView = new Uint8Array(retBuf);\n\n\t\t\tfor(let i = 0; i < (encodedBuf.byteLength - 1); i++)\n\t\t\t\tretView[i] = encodedView[i] | 0x80;\n\n\t\t\tretView[encodedBuf.byteLength - 1] = encodedView[encodedBuf.byteLength - 1];\n\t\t}\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Create string representation of current SID block\n\t * @returns {string}\n\t */\n\ttoString()\n\t{\n\t\tlet result = \"\";\n\n\t\tif(this.isHexOnly === true)\n\t\t\tresult = bufferToHexCodes(this.valueHex, 0, this.valueHex.byteLength);\n\t\telse\n\t\t{\n\t\t\tif(this.isFirstSid)\n\t\t\t{\n\t\t\t\tlet sidValue = this.valueDec;\n\n\t\t\t\tif(this.valueDec <= 39)\n\t\t\t\t\tresult = \"0.\";\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif(this.valueDec <= 79)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = \"1.\";\n\t\t\t\t\t\tsidValue -= 40;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = \"2.\";\n\t\t\t\t\t\tsidValue -= 80;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tresult += sidValue.toString();\n\t\t\t}\n\t\t\telse\n\t\t\t\tresult = this.valueDec.toString();\n\t\t}\n\n\t\treturn result;\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.valueDec = this.valueDec;\n\t\tobject.isFirstSid = this.isFirstSid;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nclass LocalObjectIdentifierValueBlock extends LocalValueBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalObjectIdentifierValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.fromString(getParametersValue(parameters, \"value\", \"\"));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tlet resultOffset = inputOffset;\n\n\t\twhile(inputLength > 0)\n\t\t{\n\t\t\tconst sidBlock = new LocalSidValueBlock();\n\t\t\tresultOffset = sidBlock.fromBER(inputBuffer, resultOffset, inputLength);\n\t\t\tif(resultOffset === (-1))\n\t\t\t{\n\t\t\t\tthis.blockLength = 0;\n\t\t\t\tthis.error = sidBlock.error;\n\t\t\t\treturn resultOffset;\n\t\t\t}\n\n\t\t\tif(this.value.length === 0)\n\t\t\t\tsidBlock.isFirstSid = true;\n\n\t\t\tthis.blockLength += sidBlock.blockLength;\n\t\t\tinputLength -= sidBlock.blockLength;\n\n\t\t\tthis.value.push(sidBlock);\n\t\t}\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\tlet retBuf = new ArrayBuffer(0);\n\n\t\tfor(let i = 0; i < this.value.length; i++)\n\t\t{\n\t\t\tconst valueBuf = this.value[i].toBER(sizeOnly);\n\t\t\tif(valueBuf.byteLength === 0)\n\t\t\t{\n\t\t\t\tthis.error = this.value[i].error;\n\t\t\t\treturn (new ArrayBuffer(0));\n\t\t\t}\n\n\t\t\tretBuf = utilConcatBuf(retBuf, valueBuf);\n\t\t}\n\n\t\treturn retBuf;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Create \"LocalObjectIdentifierValueBlock\" class from string\n\t * @param {string} string Input string to convert from\n\t * @returns {boolean}\n\t */\n\tfromString(string)\n\t{\n\t\tthis.value = []; // Clear existing SID values\n\n\t\tlet pos1 = 0;\n\t\tlet pos2 = 0;\n\n\t\tlet sid = \"\";\n\n\t\tlet flag = false;\n\n\t\tdo\n\t\t{\n\t\t\tpos2 = string.indexOf(\".\", pos1);\n\t\t\tif(pos2 === (-1))\n\t\t\t\tsid = string.substr(pos1);\n\t\t\telse\n\t\t\t\tsid = string.substr(pos1, pos2 - pos1);\n\n\t\t\tpos1 = pos2 + 1;\n\n\t\t\tif(flag)\n\t\t\t{\n\t\t\t\tconst sidBlock = this.value[0];\n\n\t\t\t\tlet plus = 0;\n\n\t\t\t\tswitch(sidBlock.valueDec)\n\t\t\t\t{\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tplus = 40;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tplus = 80;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.value = []; // clear SID array\n\t\t\t\t\t\treturn false; // ???\n\t\t\t\t}\n\n\t\t\t\tconst parsedSID = parseInt(sid, 10);\n\t\t\t\tif(isNaN(parsedSID))\n\t\t\t\t\treturn true;\n\n\t\t\t\tsidBlock.valueDec = parsedSID + plus;\n\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst sidBlock = new LocalSidValueBlock();\n\t\t\t\tsidBlock.valueDec = parseInt(sid, 10);\n\t\t\t\tif(isNaN(sidBlock.valueDec))\n\t\t\t\t\treturn true;\n\n\t\t\t\tif(this.value.length === 0)\n\t\t\t\t{\n\t\t\t\t\tsidBlock.isFirstSid = true;\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\n\t\t\t\tthis.value.push(sidBlock);\n\t\t\t}\n\t\t} while(pos2 !== (-1));\n\n\t\treturn true;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Converts \"LocalObjectIdentifierValueBlock\" class to string\n\t * @returns {string}\n\t */\n\ttoString()\n\t{\n\t\tlet result = \"\";\n\t\tlet isHexOnly = false;\n\n\t\tfor(let i = 0; i < this.value.length; i++)\n\t\t{\n\t\t\tisHexOnly = this.value[i].isHexOnly;\n\n\t\t\tlet sidStr = this.value[i].toString();\n\n\t\t\tif(i !== 0)\n\t\t\t\tresult = `${result}.`;\n\n\t\t\tif(isHexOnly)\n\t\t\t{\n\t\t\t\tsidStr = `{${sidStr}}`;\n\n\t\t\t\tif(this.value[i].isFirstSid)\n\t\t\t\t\tresult = `2.{${sidStr} - 80}`;\n\t\t\t\telse\n\t\t\t\t\tresult += sidStr;\n\t\t\t}\n\t\t\telse\n\t\t\t\tresult += sidStr;\n\t\t}\n\n\t\treturn result;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"ObjectIdentifierValueBlock\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.value = this.toString();\n\t\tobject.sidArray = [];\n\t\tfor(let i = 0; i < this.value.length; i++)\n\t\t\tobject.sidArray.push(this.value[i].toJSON());\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends BaseBlock\n */\nexport class ObjectIdentifier extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"ObjectIdentifier\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalObjectIdentifierValueBlock);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 6; // OBJECT IDENTIFIER\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"ObjectIdentifier\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of all string's classes\n//**************************************************************************************\nclass LocalUtf8StringValueBlock extends LocalHexBlock(LocalBaseBlock)\n{\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Constructor for \"LocalUtf8StringValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.isHexOnly = true;\n\t\tthis.value = \"\"; // String representation of decoded ArrayBuffer\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"Utf8StringValueBlock\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.value = this.value;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends BaseBlock\n */\nexport class Utf8String extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Utf8String\" class\n\t * @param {Object} [parameters={}]\n\t * @property {ArrayBuffer} [valueHex]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalUtf8StringValueBlock);\n\n\t\tif(\"value\" in parameters)\n\t\t\tthis.fromString(parameters.value);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 12; // Utf8String\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"Utf8String\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tthis.fromBuffer(this.valueBlock.valueHex);\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ArrayBuffer into ASN.1 internal string\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t */\n\tfromBuffer(inputBuffer)\n\t{\n\t\tthis.valueBlock.value = String.fromCharCode.apply(null, new Uint8Array(inputBuffer));\n\n\t\ttry\n\t\t{\n\t\t\t//noinspection JSDeprecatedSymbols\n\t\t\tthis.valueBlock.value = decodeURIComponent(escape(this.valueBlock.value));\n\t\t}\n\t\tcatch(ex)\n\t\t{\n\t\t\tthis.warnings.push(`Error during \"decodeURIComponent\": ${ex}, using raw string`);\n\t\t}\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting JavaScript string into ASN.1 internal class\n\t * @param {!string} inputString ASN.1 BER encoded array\n\t */\n\tfromString(inputString)\n\t{\n\t\t//noinspection JSDeprecatedSymbols\n\t\tconst str = unescape(encodeURIComponent(inputString));\n\t\tconst strLen = str.length;\n\n\t\tthis.valueBlock.valueHex = new ArrayBuffer(strLen);\n\t\tconst view = new Uint8Array(this.valueBlock.valueHex);\n\n\t\tfor(let i = 0; i < strLen; i++)\n\t\t\tview[i] = str.charCodeAt(i);\n\n\t\tthis.valueBlock.value = inputString;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalBaseBlock\n * @extends LocalHexBlock\n */\nclass LocalBmpStringValueBlock extends LocalHexBlock(LocalBaseBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalBmpStringValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.isHexOnly = true;\n\t\tthis.value = \"\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"BmpStringValueBlock\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.value = this.value;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends BaseBlock\n */\nexport class BmpString extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"BmpString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalBmpStringValueBlock);\n\n\t\tif(\"value\" in parameters)\n\t\t\tthis.fromString(parameters.value);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 30; // BmpString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"BmpString\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tthis.fromBuffer(this.valueBlock.valueHex);\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ArrayBuffer into ASN.1 internal string\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t */\n\tfromBuffer(inputBuffer)\n\t{\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tconst copyBuffer = inputBuffer.slice(0);\n\t\tconst valueView = new Uint8Array(copyBuffer);\n\n\t\tfor(let i = 0; i < valueView.length; i += 2)\n\t\t{\n\t\t\tconst temp = valueView[i];\n\n\t\t\tvalueView[i] = valueView[i + 1];\n\t\t\tvalueView[i + 1] = temp;\n\t\t}\n\n\t\tthis.valueBlock.value = String.fromCharCode.apply(null, new Uint16Array(copyBuffer));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting JavaScript string into ASN.1 internal class\n\t * @param {!string} inputString ASN.1 BER encoded array\n\t */\n\tfromString(inputString)\n\t{\n\t\tconst strLength = inputString.length;\n\n\t\tthis.valueBlock.valueHex = new ArrayBuffer(strLength * 2);\n\t\tconst valueHexView = new Uint8Array(this.valueBlock.valueHex);\n\n\t\tfor(let i = 0; i < strLength; i++)\n\t\t{\n\t\t\tconst codeBuf = utilToBase(inputString.charCodeAt(i), 8);\n\t\t\tconst codeView = new Uint8Array(codeBuf);\n\t\t\tif(codeView.length > 2)\n\t\t\t\tcontinue;\n\n\t\t\tconst dif = 2 - codeView.length;\n\n\t\t\tfor(let j = (codeView.length - 1); j >= 0; j--)\n\t\t\t\tvalueHexView[i * 2 + j + dif] = codeView[j];\n\t\t}\n\n\t\tthis.valueBlock.value = inputString;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nclass LocalUniversalStringValueBlock extends LocalHexBlock(LocalBaseBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalUniversalStringValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.isHexOnly = true;\n\t\tthis.value = \"\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"UniversalStringValueBlock\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.value = this.value;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends BaseBlock\n */\nexport class UniversalString extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"UniversalString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalUniversalStringValueBlock);\n\n\t\tif(\"value\" in parameters)\n\t\t\tthis.fromString(parameters.value);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 28; // UniversalString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"UniversalString\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tthis.fromBuffer(this.valueBlock.valueHex);\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ArrayBuffer into ASN.1 internal string\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t */\n\tfromBuffer(inputBuffer)\n\t{\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tconst copyBuffer = inputBuffer.slice(0);\n\t\tconst valueView = new Uint8Array(copyBuffer);\n\n\t\tfor(let i = 0; i < valueView.length; i += 4)\n\t\t{\n\t\t\tvalueView[i] = valueView[i + 3];\n\t\t\tvalueView[i + 1] = valueView[i + 2];\n\t\t\tvalueView[i + 2] = 0x00;\n\t\t\tvalueView[i + 3] = 0x00;\n\t\t}\n\n\t\tthis.valueBlock.value = String.fromCharCode.apply(null, new Uint32Array(copyBuffer));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting JavaScript string into ASN.1 internal class\n\t * @param {!string} inputString ASN.1 BER encoded array\n\t */\n\tfromString(inputString)\n\t{\n\t\tconst strLength = inputString.length;\n\n\t\tthis.valueBlock.valueHex = new ArrayBuffer(strLength * 4);\n\t\tconst valueHexView = new Uint8Array(this.valueBlock.valueHex);\n\n\t\tfor(let i = 0; i < strLength; i++)\n\t\t{\n\t\t\tconst codeBuf = utilToBase(inputString.charCodeAt(i), 8);\n\t\t\tconst codeView = new Uint8Array(codeBuf);\n\t\t\tif(codeView.length > 4)\n\t\t\t\tcontinue;\n\n\t\t\tconst dif = 4 - codeView.length;\n\n\t\t\tfor(let j = (codeView.length - 1); j >= 0; j--)\n\t\t\t\tvalueHexView[i * 4 + j + dif] = codeView[j];\n\t\t}\n\n\t\tthis.valueBlock.value = inputString;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\nclass LocalSimpleStringValueBlock extends LocalHexBlock(LocalBaseBlock)\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalSimpleStringValueBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.value = \"\";\n\t\tthis.isHexOnly = true;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"SimpleStringValueBlock\";\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.value = this.value;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends BaseBlock\n */\nclass LocalSimpleStringBlock extends BaseBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"LocalSimpleStringBlock\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters, LocalSimpleStringValueBlock);\n\n\t\tif(\"value\" in parameters)\n\t\t\tthis.fromString(parameters.value);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"SIMPLESTRING\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tthis.fromBuffer(this.valueBlock.valueHex);\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ArrayBuffer into ASN.1 internal string\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t */\n\tfromBuffer(inputBuffer)\n\t{\n\t\tthis.valueBlock.value = String.fromCharCode.apply(null, new Uint8Array(inputBuffer));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting JavaScript string into ASN.1 internal class\n\t * @param {!string} inputString ASN.1 BER encoded array\n\t */\n\tfromString(inputString)\n\t{\n\t\tconst strLen = inputString.length;\n\n\t\tthis.valueBlock.valueHex = new ArrayBuffer(strLen);\n\t\tconst view = new Uint8Array(this.valueBlock.valueHex);\n\n\t\tfor(let i = 0; i < strLen; i++)\n\t\t\tview[i] = inputString.charCodeAt(i);\n\n\t\tthis.valueBlock.value = inputString;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class NumericString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"NumericString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 18; // NumericString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"NumericString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class PrintableString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"PrintableString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 19; // PrintableString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"PrintableString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class TeletexString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"TeletexString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 20; // TeletexString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"TeletexString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class VideotexString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"VideotexString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 21; // VideotexString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"VideotexString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class IA5String extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"IA5String\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 22; // IA5String\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"IA5String\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class GraphicString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"GraphicString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 25; // GraphicString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"GraphicString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class VisibleString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"VisibleString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 26; // VisibleString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"VisibleString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class GeneralString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"GeneralString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 27; // GeneralString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"GeneralString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends LocalSimpleStringBlock\n */\nexport class CharacterString extends LocalSimpleStringBlock\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"CharacterString\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 29; // CharacterString\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"CharacterString\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of all date and time classes\n//**************************************************************************************\n/**\n * @extends VisibleString\n */\nexport class UTCTime extends VisibleString\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"UTCTime\" class\n\t * @param {Object} [parameters={}]\n\t * @property {string} [value] String representatio of the date\n\t * @property {Date} [valueDate] JavaScript \"Date\" object\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.year = 0;\n\t\tthis.month = 0;\n\t\tthis.day = 0;\n\t\tthis.hour = 0;\n\t\tthis.minute = 0;\n\t\tthis.second = 0;\n\n\t\t//region Create UTCTime from ASN.1 UTC string value\n\t\tif(\"value\" in parameters)\n\t\t{\n\t\t\tthis.fromString(parameters.value);\n\n\t\t\tthis.valueBlock.valueHex = new ArrayBuffer(parameters.value.length);\n\t\t\tconst view = new Uint8Array(this.valueBlock.valueHex);\n\n\t\t\tfor(let i = 0; i < parameters.value.length; i++)\n\t\t\t\tview[i] = parameters.value.charCodeAt(i);\n\t\t}\n\t\t//endregion\n\t\t//region Create GeneralizedTime from JavaScript Date type\n\t\tif(\"valueDate\" in parameters)\n\t\t{\n\t\t\tthis.fromDate(parameters.valueDate);\n\t\t\tthis.valueBlock.valueHex = this.toBuffer();\n\t\t}\n\t\t//endregion\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 23; // UTCTime\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tthis.fromBuffer(this.valueBlock.valueHex);\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ArrayBuffer into ASN.1 internal string\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t */\n\tfromBuffer(inputBuffer)\n\t{\n\t\tthis.fromString(String.fromCharCode.apply(null, new Uint8Array(inputBuffer)));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ASN.1 internal string into ArrayBuffer\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBuffer()\n\t{\n\t\tconst str = this.toString();\n\n\t\tconst buffer = new ArrayBuffer(str.length);\n\t\tconst view = new Uint8Array(buffer);\n\n\t\tfor(let i = 0; i < str.length; i++)\n\t\t\tview[i] = str.charCodeAt(i);\n\n\t\treturn buffer;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting \"Date\" object into ASN.1 internal string\n\t * @param {!Date} inputDate JavaScript \"Date\" object\n\t */\n\tfromDate(inputDate)\n\t{\n\t\tthis.year = inputDate.getUTCFullYear();\n\t\tthis.month = inputDate.getUTCMonth() + 1;\n\t\tthis.day = inputDate.getUTCDate();\n\t\tthis.hour = inputDate.getUTCHours();\n\t\tthis.minute = inputDate.getUTCMinutes();\n\t\tthis.second = inputDate.getUTCSeconds();\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Function converting ASN.1 internal string into \"Date\" object\n\t * @returns {Date}\n\t */\n\ttoDate()\n\t{\n\t\treturn (new Date(Date.UTC(this.year, this.month - 1, this.day, this.hour, this.minute, this.second)));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting JavaScript string into ASN.1 internal class\n\t * @param {!string} inputString ASN.1 BER encoded array\n\t */\n\tfromString(inputString)\n\t{\n\t\t//region Parse input string\n\t\tconst parser = /(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})Z/ig;\n\t\tconst parserArray = parser.exec(inputString);\n\t\tif(parserArray === null)\n\t\t{\n\t\t\tthis.error = \"Wrong input string for convertion\";\n\t\t\treturn;\n\t\t}\n\t\t//endregion\n\n\t\t//region Store parsed values\n\t\tconst year = parseInt(parserArray[1], 10);\n\t\tif(year >= 50)\n\t\t\tthis.year = 1900 + year;\n\t\telse\n\t\t\tthis.year = 2000 + year;\n\n\t\tthis.month = parseInt(parserArray[2], 10);\n\t\tthis.day = parseInt(parserArray[3], 10);\n\t\tthis.hour = parseInt(parserArray[4], 10);\n\t\tthis.minute = parseInt(parserArray[5], 10);\n\t\tthis.second = parseInt(parserArray[6], 10);\n\t\t//endregion\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ASN.1 internal class into JavaScript string\n\t * @returns {string}\n\t */\n\ttoString()\n\t{\n\t\tconst outputArray = new Array(7);\n\n\t\toutputArray[0] = padNumber(((this.year < 2000) ? (this.year - 1900) : (this.year - 2000)), 2);\n\t\toutputArray[1] = padNumber(this.month, 2);\n\t\toutputArray[2] = padNumber(this.day, 2);\n\t\toutputArray[3] = padNumber(this.hour, 2);\n\t\toutputArray[4] = padNumber(this.minute, 2);\n\t\toutputArray[5] = padNumber(this.second, 2);\n\t\toutputArray[6] = \"Z\";\n\n\t\treturn outputArray.join(\"\");\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"UTCTime\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.year = this.year;\n\t\tobject.month = this.month;\n\t\tobject.day = this.day;\n\t\tobject.hour = this.hour;\n\t\tobject.minute = this.minute;\n\t\tobject.second = this.second;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends VisibleString\n */\nexport class GeneralizedTime extends VisibleString\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"GeneralizedTime\" class\n\t * @param {Object} [parameters={}]\n\t * @property {string} [value] String representatio of the date\n\t * @property {Date} [valueDate] JavaScript \"Date\" object\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.year = 0;\n\t\tthis.month = 0;\n\t\tthis.day = 0;\n\t\tthis.hour = 0;\n\t\tthis.minute = 0;\n\t\tthis.second = 0;\n\t\tthis.millisecond = 0;\n\n\t\t//region Create UTCTime from ASN.1 UTC string value\n\t\tif(\"value\" in parameters)\n\t\t{\n\t\t\tthis.fromString(parameters.value);\n\n\t\t\tthis.valueBlock.valueHex = new ArrayBuffer(parameters.value.length);\n\t\t\tconst view = new Uint8Array(this.valueBlock.valueHex);\n\n\t\t\tfor(let i = 0; i < parameters.value.length; i++)\n\t\t\t\tview[i] = parameters.value.charCodeAt(i);\n\t\t}\n\t\t//endregion\n\t\t//region Create GeneralizedTime from JavaScript Date type\n\t\tif(\"valueDate\" in parameters)\n\t\t{\n\t\t\tthis.fromDate(parameters.valueDate);\n\t\t\tthis.valueBlock.valueHex = this.toBuffer();\n\t\t}\n\t\t//endregion\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 24; // GeneralizedTime\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tconst resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm === true) ? inputLength : this.lenBlock.length);\n\t\tif(resultOffset === (-1))\n\t\t{\n\t\t\tthis.error = this.valueBlock.error;\n\t\t\treturn resultOffset;\n\t\t}\n\n\t\tthis.fromBuffer(this.valueBlock.valueHex);\n\n\t\tif(this.idBlock.error.length === 0)\n\t\t\tthis.blockLength += this.idBlock.blockLength;\n\n\t\tif(this.lenBlock.error.length === 0)\n\t\t\tthis.blockLength += this.lenBlock.blockLength;\n\n\t\tif(this.valueBlock.error.length === 0)\n\t\t\tthis.blockLength += this.valueBlock.blockLength;\n\n\t\treturn resultOffset;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ArrayBuffer into ASN.1 internal string\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t */\n\tfromBuffer(inputBuffer)\n\t{\n\t\tthis.fromString(String.fromCharCode.apply(null, new Uint8Array(inputBuffer)));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ASN.1 internal string into ArrayBuffer\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBuffer()\n\t{\n\t\tconst str = this.toString();\n\n\t\tconst buffer = new ArrayBuffer(str.length);\n\t\tconst view = new Uint8Array(buffer);\n\n\t\tfor(let i = 0; i < str.length; i++)\n\t\t\tview[i] = str.charCodeAt(i);\n\n\t\treturn buffer;\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting \"Date\" object into ASN.1 internal string\n\t * @param {!Date} inputDate JavaScript \"Date\" object\n\t */\n\tfromDate(inputDate)\n\t{\n\t\tthis.year = inputDate.getUTCFullYear();\n\t\tthis.month = inputDate.getUTCMonth() + 1;\n\t\tthis.day = inputDate.getUTCDate();\n\t\tthis.hour = inputDate.getUTCHours();\n\t\tthis.minute = inputDate.getUTCMinutes();\n\t\tthis.second = inputDate.getUTCSeconds();\n\t\tthis.millisecond = inputDate.getUTCMilliseconds();\n\t}\n\t//**********************************************************************************\n\t//noinspection JSUnusedGlobalSymbols\n\t/**\n\t * Function converting ASN.1 internal string into \"Date\" object\n\t * @returns {Date}\n\t */\n\ttoDate()\n\t{\n\t\treturn (new Date(Date.UTC(this.year, this.month - 1, this.day, this.hour, this.minute, this.second, this.millisecond)));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting JavaScript string into ASN.1 internal class\n\t * @param {!string} inputString ASN.1 BER encoded array\n\t */\n\tfromString(inputString)\n\t{\n\t\t//region Initial variables\n\t\tlet isUTC = false;\n\n\t\tlet timeString = \"\";\n\t\tlet dateTimeString = \"\";\n\t\tlet fractionPart = 0;\n\n\t\tlet parser;\n\n\t\tlet hourDifference = 0;\n\t\tlet minuteDifference = 0;\n\t\t//endregion\n\n\t\t//region Convert as UTC time\n\t\tif(inputString[inputString.length - 1] === \"Z\")\n\t\t{\n\t\t\ttimeString = inputString.substr(0, inputString.length - 1);\n\n\t\t\tisUTC = true;\n\t\t}\n\t\t//endregion\n\t\t//region Convert as local time\n\t\telse\n\t\t{\n\t\t\t//noinspection JSPrimitiveTypeWrapperUsage\n\t\t\tconst number = new Number(inputString[inputString.length - 1]);\n\n\t\t\tif(isNaN(number.valueOf()))\n\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\n\t\t\ttimeString = inputString;\n\t\t}\n\t\t//endregion\n\n\t\t//region Check that we do not have a \"+\" and \"-\" symbols inside UTC time\n\t\tif(isUTC)\n\t\t{\n\t\t\tif(timeString.indexOf(\"+\") !== (-1))\n\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\n\t\t\tif(timeString.indexOf(\"-\") !== (-1))\n\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\t\t}\n\t\t//endregion\n\t\t//region Get \"UTC time difference\" in case of local time\n\t\telse\n\t\t{\n\t\t\tlet multiplier = 1;\n\t\t\tlet differencePosition = timeString.indexOf(\"+\");\n\t\t\tlet differenceString = \"\";\n\n\t\t\tif(differencePosition === (-1))\n\t\t\t{\n\t\t\t\tdifferencePosition = timeString.indexOf(\"-\");\n\t\t\t\tmultiplier = (-1);\n\t\t\t}\n\n\t\t\tif(differencePosition !== (-1))\n\t\t\t{\n\t\t\t\tdifferenceString = timeString.substr(differencePosition + 1);\n\t\t\t\ttimeString = timeString.substr(0, differencePosition);\n\n\t\t\t\tif((differenceString.length !== 2) && (differenceString.length !== 4))\n\t\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\n\t\t\t\t//noinspection JSPrimitiveTypeWrapperUsage\n\t\t\t\tlet number = new Number(differenceString.substr(0, 2));\n\n\t\t\t\tif(isNaN(number.valueOf()))\n\t\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\n\t\t\t\thourDifference = multiplier * number;\n\n\t\t\t\tif(differenceString.length === 4)\n\t\t\t\t{\n\t\t\t\t\t//noinspection JSPrimitiveTypeWrapperUsage\n\t\t\t\t\tnumber = new Number(differenceString.substr(2, 2));\n\n\t\t\t\t\tif(isNaN(number.valueOf()))\n\t\t\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\n\t\t\t\t\tminuteDifference = multiplier * number;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//endregion\n\n\t\t//region Get position of fraction point\n\t\tlet fractionPointPosition = timeString.indexOf(\".\"); // Check for \"full stop\" symbol\n\t\tif(fractionPointPosition === (-1))\n\t\t\tfractionPointPosition = timeString.indexOf(\",\"); // Check for \"comma\" symbol\n\t\t//endregion\n\n\t\t//region Get fraction part\n\t\tif(fractionPointPosition !== (-1))\n\t\t{\n\t\t\t//noinspection JSPrimitiveTypeWrapperUsage\n\t\t\tconst fractionPartCheck = new Number(`0${timeString.substr(fractionPointPosition)}`);\n\n\t\t\tif(isNaN(fractionPartCheck.valueOf()))\n\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\n\t\t\tfractionPart = fractionPartCheck.valueOf();\n\n\t\t\tdateTimeString = timeString.substr(0, fractionPointPosition);\n\t\t}\n\t\telse\n\t\t\tdateTimeString = timeString;\n\t\t//endregion\n\n\t\t//region Parse internal date\n\t\tswitch(true)\n\t\t{\n\t\t\tcase (dateTimeString.length === 8): // \"YYYYMMDD\"\n\t\t\t\tparser = /(\\d{4})(\\d{2})(\\d{2})/ig;\n\t\t\t\tif(fractionPointPosition !== (-1))\n\t\t\t\t\tthrow new Error(\"Wrong input string for convertion\"); // Here we should not have a \"fraction point\"\n\t\t\t\tbreak;\n\t\t\tcase (dateTimeString.length === 10): // \"YYYYMMDDHH\"\n\t\t\t\tparser = /(\\d{4})(\\d{2})(\\d{2})(\\d{2})/ig;\n\n\t\t\t\tif(fractionPointPosition !== (-1))\n\t\t\t\t{\n\t\t\t\t\tlet fractionResult = 60 * fractionPart;\n\t\t\t\t\tthis.minute = Math.floor(fractionResult);\n\n\t\t\t\t\tfractionResult = 60 * (fractionResult - this.minute);\n\t\t\t\t\tthis.second = Math.floor(fractionResult);\n\n\t\t\t\t\tfractionResult = 1000 * (fractionResult - this.second);\n\t\t\t\t\tthis.millisecond = Math.floor(fractionResult);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase (dateTimeString.length === 12): // \"YYYYMMDDHHMM\"\n\t\t\t\tparser = /(\\d{4})(\\d{2})(\\d{2})(\\d{2})(\\d{2})/ig;\n\n\t\t\t\tif(fractionPointPosition !== (-1))\n\t\t\t\t{\n\t\t\t\t\tlet fractionResult = 60 * fractionPart;\n\t\t\t\t\tthis.second = Math.floor(fractionResult);\n\n\t\t\t\t\tfractionResult = 1000 * (fractionResult - this.second);\n\t\t\t\t\tthis.millisecond = Math.floor(fractionResult);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase (dateTimeString.length === 14): // \"YYYYMMDDHHMMSS\"\n\t\t\t\tparser = /(\\d{4})(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})/ig;\n\n\t\t\t\tif(fractionPointPosition !== (-1))\n\t\t\t\t{\n\t\t\t\t\tconst fractionResult = 1000 * fractionPart;\n\t\t\t\t\tthis.millisecond = Math.floor(fractionResult);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\t\t}\n\t\t//endregion\n\n\t\t//region Put parsed values at right places\n\t\tconst parserArray = parser.exec(dateTimeString);\n\t\tif(parserArray === null)\n\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\n\t\tfor(let j = 1; j < parserArray.length; j++)\n\t\t{\n\t\t\tswitch(j)\n\t\t\t{\n\t\t\t\tcase 1:\n\t\t\t\t\tthis.year = parseInt(parserArray[j], 10);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tthis.month = parseInt(parserArray[j], 10);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tthis.day = parseInt(parserArray[j], 10);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tthis.hour = parseInt(parserArray[j], 10) + hourDifference;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\tthis.minute = parseInt(parserArray[j], 10) + minuteDifference;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t\tthis.second = parseInt(parserArray[j], 10);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(\"Wrong input string for convertion\");\n\t\t\t}\n\t\t}\n\t\t//endregion\n\n\t\t//region Get final date\n\t\tif(isUTC === false)\n\t\t{\n\t\t\tconst tempDate = new Date(this.year, this.month, this.day, this.hour, this.minute, this.second, this.millisecond);\n\n\t\t\tthis.year = tempDate.getUTCFullYear();\n\t\t\tthis.month = tempDate.getUTCMonth();\n\t\t\tthis.day = tempDate.getUTCDay();\n\t\t\tthis.hour = tempDate.getUTCHours();\n\t\t\tthis.minute = tempDate.getUTCMinutes();\n\t\t\tthis.second = tempDate.getUTCSeconds();\n\t\t\tthis.millisecond = tempDate.getUTCMilliseconds();\n\t\t}\n\t\t//endregion\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Function converting ASN.1 internal class into JavaScript string\n\t * @returns {string}\n\t */\n\ttoString()\n\t{\n\t\tconst outputArray = [];\n\n\t\toutputArray.push(padNumber(this.year, 4));\n\t\toutputArray.push(padNumber(this.month, 2));\n\t\toutputArray.push(padNumber(this.day, 2));\n\t\toutputArray.push(padNumber(this.hour, 2));\n\t\toutputArray.push(padNumber(this.minute, 2));\n\t\toutputArray.push(padNumber(this.second, 2));\n\t\tif(this.millisecond !== 0)\n\t\t{\n\t\t\toutputArray.push(\".\");\n\t\t\toutputArray.push(padNumber(this.millisecond, 3));\n\t\t}\n\t\toutputArray.push(\"Z\");\n\n\t\treturn outputArray.join(\"\");\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"GeneralizedTime\";\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Convertion for the block to JSON object\n\t * @returns {Object}\n\t */\n\ttoJSON()\n\t{\n\t\tlet object = {};\n\t\t\n\t\t//region Seems at the moment (Sep 2016) there is no way how to check method is supported in \"super\" object\n\t\ttry\n\t\t{\n\t\t\tobject = super.toJSON();\n\t\t}\n\t\tcatch(ex){}\n\t\t//endregion\n\n\t\tobject.year = this.year;\n\t\tobject.month = this.month;\n\t\tobject.day = this.day;\n\t\tobject.hour = this.hour;\n\t\tobject.minute = this.minute;\n\t\tobject.second = this.second;\n\t\tobject.millisecond = this.millisecond;\n\n\t\treturn object;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends Utf8String\n */\nexport class DATE extends Utf8String\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"DATE\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 31; // DATE\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"DATE\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends Utf8String\n */\nexport class TimeOfDay extends Utf8String\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"TimeOfDay\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 32; // TimeOfDay\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"TimeOfDay\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends Utf8String\n */\nexport class DateTime extends Utf8String\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"DateTime\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 33; // DateTime\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"DateTime\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends Utf8String\n */\nexport class Duration extends Utf8String\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Duration\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 34; // Duration\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"Duration\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n/**\n * @extends Utf8String\n */\nexport class TIME extends Utf8String\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Time\" class\n\t * @param {Object} [parameters={}]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tsuper(parameters);\n\n\t\tthis.idBlock.tagClass = 1; // UNIVERSAL\n\t\tthis.idBlock.tagNumber = 14; // Time\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Aux function, need to get a block name. Need to have it here for inhiritence\n\t * @returns {string}\n\t */\n\tstatic blockName()\n\t{\n\t\treturn \"TIME\";\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of special ASN.1 schema type Choice\n//**************************************************************************************\nexport class Choice\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Choice\" class\n\t * @param {Object} [parameters={}]\n\t * @property {Array} [value] Array of ASN.1 types for make a choice from\n\t * @property {boolean} [optional]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tthis.value = getParametersValue(parameters, \"value\", []);\n\t\tthis.optional = getParametersValue(parameters, \"optional\", false);\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of special ASN.1 schema type Any\n//**************************************************************************************\nexport class Any\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Any\" class\n\t * @param {Object} [parameters={}]\n\t * @property {string} [name]\n\t * @property {boolean} [optional]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tthis.name = getParametersValue(parameters, \"name\", \"\");\n\t\tthis.optional = getParametersValue(parameters, \"optional\", false);\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of special ASN.1 schema type Repeated\n//**************************************************************************************\nexport class Repeated\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Repeated\" class\n\t * @param {Object} [parameters={}]\n\t * @property {string} [name]\n\t * @property {boolean} [optional]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tthis.name = getParametersValue(parameters, \"name\", \"\");\n\t\tthis.optional = getParametersValue(parameters, \"optional\", false);\n\t\tthis.value = getParametersValue(parameters, \"value\", new Any());\n\t\tthis.local = getParametersValue(parameters, \"local\", false); // Could local or global array to store elements\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Declaration of special ASN.1 schema type RawData\n//**************************************************************************************\n/**\n * @description Special class providing ability to have \"toBER/fromBER\" for raw ArrayBuffer\n */\nexport class RawData\n{\n\t//**********************************************************************************\n\t/**\n\t * Constructor for \"Repeated\" class\n\t * @param {Object} [parameters={}]\n\t * @property {string} [name]\n\t * @property {boolean} [optional]\n\t */\n\tconstructor(parameters = {})\n\t{\n\t\tthis.data = getParametersValue(parameters, \"data\", new ArrayBuffer(0));\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Base function for converting block from BER encoded array of bytes\n\t * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n\t * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n\t * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n\t * @returns {number} Offset after least decoded byte\n\t */\n\tfromBER(inputBuffer, inputOffset, inputLength)\n\t{\n\t\tthis.data = inputBuffer.slice(inputOffset, inputLength);\n\t\treturn (inputOffset + inputLength);\n\t}\n\t//**********************************************************************************\n\t/**\n\t * Encoding of current ASN.1 block into ASN.1 encoded array (BER rules)\n\t * @param {boolean} [sizeOnly=false] Flag that we need only a size of encoding, not a real array of bytes\n\t * @returns {ArrayBuffer}\n\t */\n\ttoBER(sizeOnly = false)\n\t{\n\t\treturn this.data;\n\t}\n\t//**********************************************************************************\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Major ASN.1 BER decoding function\n//**************************************************************************************\n/**\n * Internal library function for decoding ASN.1 BER\n * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array\n * @param {!number} inputOffset Offset in ASN.1 BER encoded array where decoding should be started\n * @param {!number} inputLength Maximum length of array of bytes which can be using in this function\n * @returns {{offset: number, result: Object}}\n */\nfunction LocalFromBER(inputBuffer, inputOffset, inputLength)\n{\n\tconst incomingOffset = inputOffset; // Need to store initial offset since \"inputOffset\" is changing in the function\n\n\t//region Local function changing a type for ASN.1 classes\n\tfunction localChangeType(inputObject, newType)\n\t{\n\t\tif(inputObject instanceof newType)\n\t\t\treturn inputObject;\n\n\t\tconst newObject = new newType();\n\t\tnewObject.idBlock = inputObject.idBlock;\n\t\tnewObject.lenBlock = inputObject.lenBlock;\n\t\tnewObject.warnings = inputObject.warnings;\n\t\t//noinspection JSCheckFunctionSignatures\n\t\tnewObject.valueBeforeDecode = inputObject.valueBeforeDecode.slice(0);\n\n\t\treturn newObject;\n\t}\n\t//endregion\n\n\t//region Create a basic ASN.1 type since we need to return errors and warnings from the function\n\tlet returnObject = new BaseBlock({}, Object);\n\t//endregion\n\n\t//region Basic check for parameters\n\tif(checkBufferParams(new LocalBaseBlock(), inputBuffer, inputOffset, inputLength) === false)\n\t{\n\t\treturnObject.error = \"Wrong input parameters\";\n\t\treturn {\n\t\t\toffset: (-1),\n\t\t\tresult: returnObject\n\t\t};\n\t}\n\t//endregion\n\n\t//region Getting Uint8Array from ArrayBuffer\n\tconst intBuffer = new Uint8Array(inputBuffer, inputOffset, inputLength);\n\t//endregion\n\n\t//region Initial checks\n\tif(intBuffer.length === 0)\n\t{\n\t\tthis.error = \"Zero buffer length\";\n\t\treturn {\n\t\t\toffset: (-1),\n\t\t\tresult: returnObject\n\t\t};\n\t}\n\t//endregion\n\n\t//region Decode indentifcation block of ASN.1 BER structure\n\tlet resultOffset = returnObject.idBlock.fromBER(inputBuffer, inputOffset, inputLength);\n\treturnObject.warnings.concat(returnObject.idBlock.warnings);\n\tif(resultOffset === (-1))\n\t{\n\t\treturnObject.error = returnObject.idBlock.error;\n\t\treturn {\n\t\t\toffset: (-1),\n\t\t\tresult: returnObject\n\t\t};\n\t}\n\n\tinputOffset = resultOffset;\n\tinputLength -= returnObject.idBlock.blockLength;\n\t//endregion\n\n\t//region Decode length block of ASN.1 BER structure\n\tresultOffset = returnObject.lenBlock.fromBER(inputBuffer, inputOffset, inputLength);\n\treturnObject.warnings.concat(returnObject.lenBlock.warnings);\n\tif(resultOffset === (-1))\n\t{\n\t\treturnObject.error = returnObject.lenBlock.error;\n\t\treturn {\n\t\t\toffset: (-1),\n\t\t\tresult: returnObject\n\t\t};\n\t}\n\n\tinputOffset = resultOffset;\n\tinputLength -= returnObject.lenBlock.blockLength;\n\t//endregion\n\n\t//region Check for usign indefinite length form in encoding for primitive types\n\tif((returnObject.idBlock.isConstructed === false) &&\n\t\t(returnObject.lenBlock.isIndefiniteForm === true))\n\t{\n\t\treturnObject.error = \"Indefinite length form used for primitive encoding form\";\n\t\treturn {\n\t\t\toffset: (-1),\n\t\t\tresult: returnObject\n\t\t};\n\t}\n\t//endregion\n\n\t//region Switch ASN.1 block type\n\tlet newASN1Type = BaseBlock;\n\n\tswitch(returnObject.idBlock.tagClass)\n\t{\n\t\t//region UNIVERSAL\n\t\tcase 1:\n\t\t\t//region Check for reserved tag numbers\n\t\t\tif((returnObject.idBlock.tagNumber >= 37) &&\n\t\t\t\t(returnObject.idBlock.isHexOnly === false))\n\t\t\t{\n\t\t\t\treturnObject.error = \"UNIVERSAL 37 and upper tags are reserved by ASN.1 standard\";\n\t\t\t\treturn {\n\t\t\t\t\toffset: (-1),\n\t\t\t\t\tresult: returnObject\n\t\t\t\t};\n\t\t\t}\n\t\t\t//endregion\n\n\t\t\tswitch(returnObject.idBlock.tagNumber)\n\t\t\t{\n\t\t\t\t//region EndOfContent type\n\t\t\t\tcase 0:\n\t\t\t\t\t//region Check for EndOfContent type\n\t\t\t\t\tif((returnObject.idBlock.isConstructed === true) &&\n\t\t\t\t\t\t(returnObject.lenBlock.length > 0))\n\t\t\t\t\t{\n\t\t\t\t\t\treturnObject.error = \"Type [UNIVERSAL 0] is reserved\";\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\toffset: (-1),\n\t\t\t\t\t\t\tresult: returnObject\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t//endregion\n\n\t\t\t\t\tnewASN1Type = EndOfContent;\n\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Boolean type\n\t\t\t\tcase 1:\n\t\t\t\t\tnewASN1Type = Boolean;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Integer type\n\t\t\t\tcase 2:\n\t\t\t\t\tnewASN1Type = Integer;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region BitString type\n\t\t\t\tcase 3:\n\t\t\t\t\tnewASN1Type = BitString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region OctetString type\n\t\t\t\tcase 4:\n\t\t\t\t\tnewASN1Type = OctetString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Null type\n\t\t\t\tcase 5:\n\t\t\t\t\tnewASN1Type = Null;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region OBJECT IDENTIFIER type\n\t\t\t\tcase 6:\n\t\t\t\t\tnewASN1Type = ObjectIdentifier;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Enumerated type\n\t\t\t\tcase 10:\n\t\t\t\t\tnewASN1Type = Enumerated;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Utf8String type\n\t\t\t\tcase 12:\n\t\t\t\t\tnewASN1Type = Utf8String;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Time type\n\t\t\t\tcase 14:\n\t\t\t\t\tnewASN1Type = TIME;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region ASN.1 reserved type\n\t\t\t\tcase 15:\n\t\t\t\t\treturnObject.error = \"[UNIVERSAL 15] is reserved by ASN.1 standard\";\n\t\t\t\t\treturn {\n\t\t\t\t\t\toffset: (-1),\n\t\t\t\t\t\tresult: returnObject\n\t\t\t\t\t};\n\t\t\t\t//endregion\n\t\t\t\t//region Sequence type\n\t\t\t\tcase 16:\n\t\t\t\t\tnewASN1Type = Sequence;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Set type\n\t\t\t\tcase 17:\n\t\t\t\t\tnewASN1Type = Set;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region NumericString type\n\t\t\t\tcase 18:\n\t\t\t\t\tnewASN1Type = NumericString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region PrintableString type\n\t\t\t\tcase 19:\n\t\t\t\t\tnewASN1Type = PrintableString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region TeletexString type\n\t\t\t\tcase 20:\n\t\t\t\t\tnewASN1Type = TeletexString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region VideotexString type\n\t\t\t\tcase 21:\n\t\t\t\t\tnewASN1Type = VideotexString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region IA5String type\n\t\t\t\tcase 22:\n\t\t\t\t\tnewASN1Type = IA5String;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region UTCTime type\n\t\t\t\tcase 23:\n\t\t\t\t\tnewASN1Type = UTCTime;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region GeneralizedTime type\n\t\t\t\tcase 24:\n\t\t\t\t\tnewASN1Type = GeneralizedTime;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region GraphicString type\n\t\t\t\tcase 25:\n\t\t\t\t\tnewASN1Type = GraphicString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region VisibleString type\n\t\t\t\tcase 26:\n\t\t\t\t\tnewASN1Type = VisibleString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region GeneralString type\n\t\t\t\tcase 27:\n\t\t\t\t\tnewASN1Type = GeneralString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region UniversalString type\n\t\t\t\tcase 28:\n\t\t\t\t\tnewASN1Type = UniversalString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region CharacterString type\n\t\t\t\tcase 29:\n\t\t\t\t\tnewASN1Type = CharacterString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region BmpString type\n\t\t\t\tcase 30:\n\t\t\t\t\tnewASN1Type = BmpString;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region DATE type\n\t\t\t\tcase 31:\n\t\t\t\t\tnewASN1Type = DATE;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region TimeOfDay type\n\t\t\t\tcase 32:\n\t\t\t\t\tnewASN1Type = TimeOfDay;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Date-Time type\n\t\t\t\tcase 33:\n\t\t\t\t\tnewASN1Type = DateTime;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region Duration type\n\t\t\t\tcase 34:\n\t\t\t\t\tnewASN1Type = Duration;\n\t\t\t\t\tbreak;\n\t\t\t\t//endregion\n\t\t\t\t//region default\n\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tlet newObject;\n\n\t\t\t\t\t\tif(returnObject.idBlock.isConstructed === true)\n\t\t\t\t\t\t\tnewObject = new Constructed();\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tnewObject = new Primitive();\n\n\t\t\t\t\t\tnewObject.idBlock = returnObject.idBlock;\n\t\t\t\t\t\tnewObject.lenBlock = returnObject.lenBlock;\n\t\t\t\t\t\tnewObject.warnings = returnObject.warnings;\n\n\t\t\t\t\t\treturnObject = newObject;\n\n\t\t\t\t\t\tresultOffset = returnObject.fromBER(inputBuffer, inputOffset, inputLength);\n\t\t\t\t\t}\n\t\t\t\t//endregion\n\t\t\t}\n\t\t\tbreak;\n\t\t//endregion\n\t\t//region All other tag classes\n\t\tcase 2: // APPLICATION\n\t\tcase 3: // CONTEXT-SPECIFIC\n\t\tcase 4: // PRIVATE\n\t\tdefault:\n\t\t\t{\n\t\t\t\tif(returnObject.idBlock.isConstructed === true)\n\t\t\t\t\tnewASN1Type = Constructed;\n\t\t\t\telse\n\t\t\t\t\tnewASN1Type = Primitive;\n\t\t\t}\n\t\t//endregion\n\t}\n\t//endregion\n\n\t//region Change type and perform BER decoding\n\treturnObject = localChangeType(returnObject, newASN1Type);\n\tresultOffset = returnObject.fromBER(inputBuffer, inputOffset, (returnObject.lenBlock.isIndefiniteForm === true) ? inputLength : returnObject.lenBlock.length);\n\t//endregion\n\n\t//region Coping incoming buffer for entire ASN.1 block\n\treturnObject.valueBeforeDecode = inputBuffer.slice(incomingOffset, incomingOffset + returnObject.blockLength);\n\t//endregion\n\n\treturn {\n\t\toffset: resultOffset,\n\t\tresult: returnObject\n\t};\n}\n//**************************************************************************************\n/**\n * Major function for decoding ASN.1 BER array into internal library structuries\n * @param {!ArrayBuffer} inputBuffer ASN.1 BER encoded array of bytes\n */\nexport function fromBER(inputBuffer)\n{\n\tif(inputBuffer.byteLength === 0)\n\t{\n\t\tconst result = new BaseBlock({}, Object);\n\t\tresult.error = \"Input buffer has zero length\";\n\n\t\treturn {\n\t\t\toffset: (-1),\n\t\t\tresult\n\t\t};\n\t}\n\n\treturn LocalFromBER(inputBuffer, 0, inputBuffer.byteLength);\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Major scheme verification function\n//**************************************************************************************\n/**\n * Compare of two ASN.1 object trees\n * @param {!Object} root Root of input ASN.1 object tree\n * @param {!Object} inputData Input ASN.1 object tree\n * @param {!Object} inputSchema Input ASN.1 schema to compare with\n * @return {{verified: boolean}|{verified:boolean, result: Object}}\n */\nexport function compareSchema(root, inputData, inputSchema)\n{\n\t//region Special case for Choice schema element type\n\tif(inputSchema instanceof Choice)\n\t{\n\t\tconst choiceResult = false;\n\n\t\tfor(let j = 0; j < inputSchema.value.length; j++)\n\t\t{\n\t\t\tconst result = compareSchema(root, inputData, inputSchema.value[j]);\n\t\t\tif(result.verified === true)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tverified: true,\n\t\t\t\t\tresult: root\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif(choiceResult === false)\n\t\t{\n\t\t\tconst _result = {\n\t\t\t\tverified: false,\n\t\t\t\tresult: {\n\t\t\t\t\terror: \"Wrong values for Choice type\"\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\t\t_result.name = inputSchema.name;\n\n\t\t\treturn _result;\n\t\t}\n\t}\n\t//endregion\n\n\t//region Special case for Any schema element type\n\tif(inputSchema instanceof Any)\n\t{\n\t\t//region Add named component of ASN.1 schema\n\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\troot[inputSchema.name] = inputData;\n\t\t//endregion\n\n\t\treturn {\n\t\t\tverified: true,\n\t\t\tresult: root\n\t\t};\n\t}\n\t//endregion\n\n\t//region Initial check\n\tif((root instanceof Object) === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong root object\" }\n\t\t};\n\t}\n\n\tif((inputData instanceof Object) === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 data\" }\n\t\t};\n\t}\n\n\tif((inputSchema instanceof Object) === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\n\tif((\"idBlock\" in inputSchema) === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\t//endregion\n\n\t//region Comparing idBlock properties in ASN.1 data and ASN.1 schema\n\t//region Encode and decode ASN.1 schema idBlock\n\t/// <remarks>This encoding/decoding is neccessary because could be an errors in schema definition</remarks>\n\tif((\"fromBER\" in inputSchema.idBlock) === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\n\tif((\"toBER\" in inputSchema.idBlock) === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\n\tconst encodedId = inputSchema.idBlock.toBER(false);\n\tif(encodedId.byteLength === 0)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Error encoding idBlock for ASN.1 schema\" }\n\t\t};\n\t}\n\n\tconst decodedOffset = inputSchema.idBlock.fromBER(encodedId, 0, encodedId.byteLength);\n\tif(decodedOffset === (-1))\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Error decoding idBlock for ASN.1 schema\" }\n\t\t};\n\t}\n\t//endregion\n\n\t//region tagClass\n\tif(inputSchema.idBlock.hasOwnProperty(\"tagClass\") === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\n\tif(inputSchema.idBlock.tagClass !== inputData.idBlock.tagClass)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: root\n\t\t};\n\t}\n\t//endregion\n\t//region tagNumber\n\tif(inputSchema.idBlock.hasOwnProperty(\"tagNumber\") === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\n\tif(inputSchema.idBlock.tagNumber !== inputData.idBlock.tagNumber)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: root\n\t\t};\n\t}\n\t//endregion\n\t//region isConstructed\n\tif(inputSchema.idBlock.hasOwnProperty(\"isConstructed\") === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\n\tif(inputSchema.idBlock.isConstructed !== inputData.idBlock.isConstructed)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: root\n\t\t};\n\t}\n\t//endregion\n\t//region isHexOnly\n\tif((\"isHexOnly\" in inputSchema.idBlock) === false) // Since 'isHexOnly' is an inhirited property\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t};\n\t}\n\n\tif(inputSchema.idBlock.isHexOnly !== inputData.idBlock.isHexOnly)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: root\n\t\t};\n\t}\n\t//endregion\n\t//region valueHex\n\tif(inputSchema.idBlock.isHexOnly === true)\n\t{\n\t\tif((\"valueHex\" in inputSchema.idBlock) === false) // Since 'valueHex' is an inhirited property\n\t\t{\n\t\t\treturn {\n\t\t\t\tverified: false,\n\t\t\t\tresult: { error: \"Wrong ASN.1 schema\" }\n\t\t\t};\n\t\t}\n\n\t\tconst schemaView = new Uint8Array(inputSchema.idBlock.valueHex);\n\t\tconst asn1View = new Uint8Array(inputData.idBlock.valueHex);\n\n\t\tif(schemaView.length !== asn1View.length)\n\t\t{\n\t\t\treturn {\n\t\t\t\tverified: false,\n\t\t\t\tresult: root\n\t\t\t};\n\t\t}\n\n\t\tfor(let i = 0; i < schemaView.length; i++)\n\t\t{\n\t\t\tif(schemaView[i] !== asn1View[1])\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tverified: false,\n\t\t\t\t\tresult: root\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\t//endregion\n\t//endregion\n\n\t//region Add named component of ASN.1 schema\n\tif(inputSchema.hasOwnProperty(\"name\"))\n\t{\n\t\tinputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, \"\");\n\t\tif(inputSchema.name !== \"\")\n\t\t\troot[inputSchema.name] = inputData;\n\t}\n\t//endregion\n\n\t//region Getting next ASN.1 block for comparition\n\tif(inputSchema.idBlock.isConstructed === true)\n\t{\n\t\tlet admission = 0;\n\t\tlet result = { verified: false };\n\n\t\tlet maxLength = inputSchema.valueBlock.value.length;\n\n\t\tif(maxLength > 0)\n\t\t{\n\t\t\tif(inputSchema.valueBlock.value[0] instanceof Repeated)\n\t\t\t\tmaxLength = inputData.valueBlock.value.length;\n\t\t}\n\n\t\t//region Special case when constructive value has no elements\n\t\tif(maxLength === 0)\n\t\t{\n\t\t\treturn {\n\t\t\t\tverified: true,\n\t\t\t\tresult: root\n\t\t\t};\n\t\t}\n\t\t//endregion\n\n\t\t//region Special case when \"inputData\" has no values and \"inputSchema\" has all optional values\n\t\tif((inputData.valueBlock.value.length === 0) &&\n\t\t\t(inputSchema.valueBlock.value.length !== 0))\n\t\t{\n\t\t\tlet _optional = true;\n\n\t\t\tfor(let i = 0; i < inputSchema.valueBlock.value.length; i++)\n\t\t\t\t_optional = _optional && (inputSchema.valueBlock.value[i].optional || false);\n\n\t\t\tif(_optional === true)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tverified: true,\n\t\t\t\t\tresult: root\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t//region Delete early added name of block\n\t\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\t{\n\t\t\t\tinputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, \"\");\n\t\t\t\tif(inputSchema.name !== \"\")\n\t\t\t\t\tdelete root[inputSchema.name];\n\t\t\t}\n\t\t\t//endregion\n\n\t\t\troot.error = \"Inconsistent object length\";\n\n\t\t\treturn {\n\t\t\t\tverified: false,\n\t\t\t\tresult: root\n\t\t\t};\n\t\t}\n\t\t//endregion\n\n\t\tfor(let i = 0; i < maxLength; i++)\n\t\t{\n\t\t\t//region Special case when there is an \"optional\" element of ASN.1 schema at the end\n\t\t\tif((i - admission) >= inputData.valueBlock.value.length)\n\t\t\t{\n\t\t\t\tif(inputSchema.valueBlock.value[i].optional === false)\n\t\t\t\t{\n\t\t\t\t\tconst _result = {\n\t\t\t\t\t\tverified: false,\n\t\t\t\t\t\tresult: root\n\t\t\t\t\t};\n\n\t\t\t\t\troot.error = \"Inconsistent length between ASN.1 data and schema\";\n\n\t\t\t\t\t//region Delete early added name of block\n\t\t\t\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\t\t\t{\n\t\t\t\t\t\tinputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, \"\");\n\t\t\t\t\t\tif(inputSchema.name !== \"\")\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdelete root[inputSchema.name];\n\t\t\t\t\t\t\t_result.name = inputSchema.name;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//endregion\n\n\t\t\t\t\treturn _result;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//endregion\n\t\t\telse\n\t\t\t{\n\t\t\t\t//region Special case for Repeated type of ASN.1 schema element\n\t\t\t\tif(inputSchema.valueBlock.value[0] instanceof Repeated)\n\t\t\t\t{\n\t\t\t\t\tresult = compareSchema(root, inputData.valueBlock.value[i], inputSchema.valueBlock.value[0].value);\n\t\t\t\t\tif(result.verified === false)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(inputSchema.valueBlock.value[0].optional === true)\n\t\t\t\t\t\t\tadmission++;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//region Delete early added name of block\n\t\t\t\t\t\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tinputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, \"\");\n\t\t\t\t\t\t\t\tif(inputSchema.name !== \"\")\n\t\t\t\t\t\t\t\t\tdelete root[inputSchema.name];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//endregion\n\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif((\"name\" in inputSchema.valueBlock.value[0]) && (inputSchema.valueBlock.value[0].name.length > 0))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet arrayRoot = {};\n\n\t\t\t\t\t\tif((\"local\" in inputSchema.valueBlock.value[0]) && (inputSchema.valueBlock.value[0].local === true))\n\t\t\t\t\t\t\tarrayRoot = inputData;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tarrayRoot = root;\n\n\t\t\t\t\t\tif(typeof arrayRoot[inputSchema.valueBlock.value[0].name] === \"undefined\")\n\t\t\t\t\t\t\tarrayRoot[inputSchema.valueBlock.value[0].name] = [];\n\n\t\t\t\t\t\tarrayRoot[inputSchema.valueBlock.value[0].name].push(inputData.valueBlock.value[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//endregion\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult = compareSchema(root, inputData.valueBlock.value[i - admission], inputSchema.valueBlock.value[i]);\n\t\t\t\t\tif(result.verified === false)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(inputSchema.valueBlock.value[i].optional === true)\n\t\t\t\t\t\t\tadmission++;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//region Delete early added name of block\n\t\t\t\t\t\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tinputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, \"\");\n\t\t\t\t\t\t\t\tif(inputSchema.name !== \"\")\n\t\t\t\t\t\t\t\t\tdelete root[inputSchema.name];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//endregion\n\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(result.verified === false) // The situation may take place if last element is \"optional\" and verification failed\n\t\t{\n\t\t\tconst _result = {\n\t\t\t\tverified: false,\n\t\t\t\tresult: root\n\t\t\t};\n\n\t\t\t//region Delete early added name of block\n\t\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\t{\n\t\t\t\tinputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, \"\");\n\t\t\t\tif(inputSchema.name !== \"\")\n\t\t\t\t{\n\t\t\t\t\tdelete root[inputSchema.name];\n\t\t\t\t\t_result.name = inputSchema.name;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//endregion\n\n\t\t\treturn _result;\n\t\t}\n\n\t\treturn {\n\t\t\tverified: true,\n\t\t\tresult: root\n\t\t};\n\t}\n\t//endregion\n\t//region Ability to parse internal value for primitive-encoded value (value of OctetString, for example)\n\tif((\"primitiveSchema\" in inputSchema) &&\n\t\t(\"valueHex\" in inputData.valueBlock))\n\t{\n\t\t//region Decoding of raw ASN.1 data\n\t\tconst asn1 = fromBER(inputData.valueBlock.valueHex);\n\t\tif(asn1.offset === (-1))\n\t\t{\n\t\t\tconst _result = {\n\t\t\t\tverified: false,\n\t\t\t\tresult: asn1.result\n\t\t\t};\n\n\t\t\t//region Delete early added name of block\n\t\t\tif(inputSchema.hasOwnProperty(\"name\"))\n\t\t\t{\n\t\t\t\tinputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, \"\");\n\t\t\t\tif(inputSchema.name !== \"\")\n\t\t\t\t{\n\t\t\t\t\tdelete root[inputSchema.name];\n\t\t\t\t\t_result.name = inputSchema.name;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//endregion\n\n\t\t\treturn _result;\n\t\t}\n\t\t//endregion\n\n\t\treturn compareSchema(root, asn1.result, inputSchema.primitiveSchema);\n\t}\n\n\treturn {\n\t\tverified: true,\n\t\tresult: root\n\t};\n\t//endregion\n}\n//**************************************************************************************\n//noinspection JSUnusedGlobalSymbols\n/**\n * ASN.1 schema verification for ArrayBuffer data\n * @param {!ArrayBuffer} inputBuffer Input BER-encoded ASN.1 data\n * @param {!Object} inputSchema Input ASN.1 schema to verify against to\n * @return {{verified: boolean}|{verified:boolean, result: Object}}\n */\nexport function verifySchema(inputBuffer, inputSchema)\n{\n\t//region Initial check\n\tif((inputSchema instanceof Object) === false)\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: { error: \"Wrong ASN.1 schema type\" }\n\t\t};\n\t}\n\t//endregion\n\n\t//region Decoding of raw ASN.1 data\n\tconst asn1 = fromBER(inputBuffer);\n\tif(asn1.offset === (-1))\n\t{\n\t\treturn {\n\t\t\tverified: false,\n\t\t\tresult: asn1.result\n\t\t};\n\t}\n\t//endregion\n\n\t//region Compare ASN.1 struct with input schema\n\treturn compareSchema(asn1.result, asn1.result, inputSchema);\n\t//endregion\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************\n//region Major function converting JSON to ASN.1 objects\n//**************************************************************************************\n//noinspection JSUnusedGlobalSymbols\n/**\n * Converting from JSON to ASN.1 objects\n * @param {string|Object} json JSON string or object to convert to ASN.1 objects\n */\nexport function fromJSON(json)\n{\n\t// TODO Implement\n}\n//**************************************************************************************\n//endregion\n//**************************************************************************************"],"file":"asn1.js"}